<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Vector Read Benchmarks • gdalraster</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Vector Read Benchmarks">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gdalraster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2.1.9031</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/raster-api-tutorial.html">Raster API Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/raster-display.html">Raster Display</a></li>
    <li><a class="dropdown-item" href="../articles/raster-attribute-tables.html">Raster Attribute Tables</a></li>
    <li><a class="dropdown-item" href="../articles/gdal-block-cache.html">GDAL Block Cache</a></li>
    <li><a class="dropdown-item" href="../articles/vector-api-overview.html">Vector API Overview</a></li>
    <li><a class="dropdown-item" href="../articles/vector-read-benchmarks.html">Vector Read Benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/gdal-config-quick-ref.html">GDAL Config Quick Reference</a></li>
    <li><a class="dropdown-item" href="../articles/use-gdal-cli-from-r.html">Using 'gdal' CLI algorithms from R</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Archived articles</h6></li>
    <li><a class="dropdown-item" href="../articles/gdalvector-draft.html">Draft Bindings to the GDAL/OGR Vector API</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USDAForestService/gdalraster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Vector Read Benchmarks</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/gdalraster/blob/main/vignettes/articles/vector-read-benchmarks.Rmd" class="external-link"><code>vignettes/articles/vector-read-benchmarks.Rmd</code></a></small>
      <div class="d-none name"><code>vector-read-benchmarks.Rmd</code></div>
    </div>

    
    
<p>Vector read benchmarks for R package
<strong>gdalraster</strong><br>
(last updated 2025-07-06)</p>
<p>The following benchmark tests follow the format of benchmarks
described in GDAL <a href="https://gdal.org/en/stable/development/rfc/rfc86_column_oriented_api.html#benchmarks" class="external-link">RFC
86: Column-oriented read API for vector layers</a> using the same
dataset. The timings here cannot be compared directly with the GDAL
timings due to hardware differences (hardware used for the GDAL
benchmarks is not specified). The timings reported here should be
conservative in the sense that hardware was a relatively slow, six-year
old laptop at the time of writing (Intel(R) Core(TM) i5-8250U CPU @
1.60GHz, 8 GB RAM, SSD). The benchmarks are intended as a sanity check
on read performance in the context of ranges seen for two different I/O
methods (traditional GetNextFeature() iteration vs. column-oriented
ArrowArrayStream), and multiple implementations in both plain C++ and
using Python libraries as described for the GDAL benchmarks, and using R
packages described here.</p>
<div class="section level2">
<h2 id="software-environment">Software environment<a class="anchor" aria-label="anchor" href="#software-environment"></a>
</h2>
<p>Linux Ubuntu 24.04, R 4.5.0, GDAL 3.10.3, gdalraster 2.0.0.9002, sf
1.0.21</p>
</div>
<div class="section level2">
<h2 id="vector-data">Vector data<a class="anchor" aria-label="anchor" href="#vector-data"></a>
</h2>
<p>NZ Building Outlines, <a href="https://data.linz.govt.nz/layer/101290-nz-building-outlines/" class="external-link uri">https://data.linz.govt.nz/layer/101290-nz-building-outlines/</a>,
from Land Information New Zealand: “This dataset provides current
outlines of buildings within mainland New Zealand captured from the
latest aerial imagery.”</p>
<p>Tests used the GeoPackage file nz-building-outlines.gpkg (1.5 GB).
The layer contains 3.3 million features, each with 13 attribute fields
(2 fields of type Integer, 8 of type String, 3 of type DateTime) and
polygon geometries.</p>
</div>
<div class="section level2">
<h2 id="benchmark-programs">Benchmark programs<a class="anchor" aria-label="anchor" href="#benchmark-programs"></a>
</h2>
<p>Each program reads all features from the layer and populates an R
data frame. Code for the programs along with output generated by
<code>reprex::reprex()</code> is given in a separate section further
below.</p>
<p><strong>bench_gdalraster_fetch.R</strong></p>
<p>Uses the class method <code>GDALVector$fetch()</code> in
<strong>gdalraster</strong> for traditional row-level reading done in
C++ iterating over features with <code>OGRLayer::GetNextFeature()</code>
in the GDAL API. The method is an analog of function
<code>DBI::dbFetch()</code> in the <strong>DBI</strong> R package.</p>
<p><strong>bench_gdalraster_arrow_stream.R</strong> (requires GDAL &gt;=
3.6)</p>
<p>Uses the class method <code>GDALVector$getArrowStream()</code> in
<strong>gdalraster</strong> to expose an Arrow C stream on the layer as
a <code>nanoarrow_array_stream</code> object (external pointer to an
ArrowArrayStream). Provides direct access to the stream object and
retrieves features in a column-oriented memory layout. The required
package <strong>nanoarrow</strong> provides S3 methods for
<code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> to import a <code>nanoarrow_array</code>
(one batch at a time), or the <code>nanoarrow_array_stream</code> itself
(pulling all batches in the stream).</p>
<p><strong>bench_gdalraster_fetch_conv_to_sf.R</strong></p>
<p>The same as bench_gdalraster_fetch.R (traditional row-level access)
but with conversion to a classed <strong>sf</strong> data frame via
<code>sf::st_sf()</code> included in the timing.</p>
<p><strong>bench_sf_read_sf.R</strong></p>
<p>Traditional row-level read using package <strong>sf</strong> for its
function <code>sf::read_sf()</code>. Populates a classed data frame,
with geometries contained in a classed list column.</p>
<p><strong>bench_sf_read_sf_use_stream.R</strong> (requires GDAL &gt;=
3.6)</p>
<p>Uses <code>sf::read_sf()</code> with argument
<code>use_stream = TRUE</code>: “use the experimental columnar interface
introduced in GDAL 3.6”.</p>
</div>
<div class="section level2">
<h2 id="timings">Timings<a class="anchor" aria-label="anchor" href="#timings"></a>
</h2>
<table class="table">
<caption>Read nz-building-outlines.gpkg (1.5 GB) and populate a data
frame.</caption>
<colgroup>
<col width="45%">
<col width="11%">
<col width="21%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">Bench program</th>
<th align="right">Time (s)</th>
<th align="left">Data frame class</th>
<th align="left">Geom list column</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">bench_gdalraster_fetch.R</td>
<td align="right">25.90</td>
<td align="left">OGRFeatureSet</td>
<td align="left">WKB <code>raw</code> vectors</td>
</tr>
<tr class="even">
<td align="left">bench_gdalraster_arrow_stream.R</td>
<td align="right">5.90</td>
<td align="left">base data.frame</td>
<td align="left">WKB <code>raw</code> vectors</td>
</tr>
<tr class="odd">
<td align="left">bench_gdalraster_fetch_conv_to_sf.R</td>
<td align="right">56.98</td>
<td align="left">sf</td>
<td align="left">classed sfc</td>
</tr>
<tr class="even">
<td align="left">bench_sf_read_sf.R</td>
<td align="right">176.56</td>
<td align="left">sf</td>
<td align="left">classed sfc</td>
</tr>
<tr class="odd">
<td align="left">bench_sf_read_sf_use_stream.R</td>
<td align="right">25.30</td>
<td align="left">sf</td>
<td align="left">classed sfc</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="code">Code<a class="anchor" aria-label="anchor" href="#code"></a>
</h2>
<div class="section level3">
<h3 id="bench_gdalraster_fetch-r">bench_gdalraster_fetch.R<a class="anchor" aria-label="anchor" href="#bench_gdalraster_fetch-r"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usdaforestservice.github.io/gdalraster/">gdalraster</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; GDAL 3.10.3 (released 2025-04-01), GEOS 3.12.2, PROJ 9.4.1</span></span>
<span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="st">'/home/ctoney/data/gis/nz-building-outlines/nz-building-outlines.gpkg'</span></span>
<span><span class="op">(</span><span class="va">lyr</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="va">GDALVector</span>, <span class="va">f</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; C++ object of class GDALVector</span></span>
<span><span class="co">#&gt;  Driver : GeoPackage (GPKG)</span></span>
<span><span class="co">#&gt;  DSN    : /home/ctoney/data/gis/nz-building-outlines/nz-building-outlines.gpkg</span></span>
<span><span class="co">#&gt;  Layer  : nz_building_outlines</span></span>
<span><span class="co">#&gt;  CRS    : NZGD2000 / New Zealand Transverse Mercator 2000 (EPSG:2193)</span></span>
<span><span class="co">#&gt;  Geom   : MULTIPOLYGON</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3289574</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">d</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">fetch</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;  25.006   0.881  25.901</span></span>
<span></span>
<span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">==</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt; OGR feature set</span></span>
<span><span class="co">#&gt;   FID building_id name     use suburb_locality town_city territorial_authority</span></span>
<span><span class="co">#&gt; 1   1     2292051      Unknown          Marton    Marton   Rangitikei District</span></span>
<span><span class="co">#&gt; 2   2     2292353      Unknown      Durie Hill Whanganui    Whanganui District</span></span>
<span><span class="co">#&gt; 3   3     2292407      Unknown      Durie Hill Whanganui    Whanganui District</span></span>
<span><span class="co">#&gt; 4   4     2292675      Unknown        Feilding  Feilding     Manawatu District</span></span>
<span><span class="co">#&gt; 5   5     2292771      Unknown        Feilding  Feilding     Manawatu District</span></span>
<span><span class="co">#&gt; 6   6     2292825      Unknown        Feilding  Feilding     Manawatu District</span></span>
<span><span class="co">#&gt;       capture_method capture_source_group capture_source_id</span></span>
<span><span class="co">#&gt; 1 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 2 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 3 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 4 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 5 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 6 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt;                                       capture_source_name capture_source_from</span></span>
<span><span class="co">#&gt; 1 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 2 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 3 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 4 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 5 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 6 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt;   capture_source_to last_modified                                  geom</span></span>
<span><span class="co">#&gt; 1        2016-04-21    2019-01-04 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span></span>
<span><span class="co">#&gt; 2        2016-04-21    2019-01-04 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span></span>
<span><span class="co">#&gt; 3        2016-04-21    2019-01-04 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span></span>
<span><span class="co">#&gt; 4        2016-04-21    2019-01-04 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span></span>
<span><span class="co">#&gt; 5        2016-04-21    2019-01-04 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span></span>
<span><span class="co">#&gt; 6        2016-04-21    2019-01-04 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">close</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><sup>Created on 2025-05-25 with <a href="https://reprex.tidyverse.org" class="external-link">reprex v2.1.1</a></sup></p>
</div>
<div class="section level3">
<h3 id="bench_gdalraster_arrow_stream-r">bench_gdalraster_arrow_stream.R<a class="anchor" aria-label="anchor" href="#bench_gdalraster_arrow_stream-r"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usdaforestservice.github.io/gdalraster/">gdalraster</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; GDAL 3.10.3 (released 2025-04-01), GEOS 3.12.2, PROJ 9.4.1</span></span>
<span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="st">'/home/ctoney/data/gis/nz-building-outlines/nz-building-outlines.gpkg'</span></span>
<span><span class="op">(</span><span class="va">lyr</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="va">GDALVector</span>, <span class="va">f</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; C++ object of class GDALVector</span></span>
<span><span class="co">#&gt;  Driver : GeoPackage (GPKG)</span></span>
<span><span class="co">#&gt;  DSN    : /home/ctoney/data/gis/nz-building-outlines/nz-building-outlines.gpkg</span></span>
<span><span class="co">#&gt;  Layer  : nz_building_outlines</span></span>
<span><span class="co">#&gt;  CRS    : NZGD2000 / New Zealand Transverse Mercator 2000 (EPSG:2193)</span></span>
<span><span class="co">#&gt;  Geom   : MULTIPOLYGON</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3289574</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">testCapability</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">FastGetArrowStream</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>nanoarrow.warn_unregistered_extension <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="op">(</span><span class="va">stream</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">getArrowStream</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;nanoarrow_array_stream struct&lt;fid: int64, building_id: int32, name: string, use: string, suburb_locality: string, town_city: string, territorial_authority: string, capture_method: string, capture_source_group: string, capture_source_id: int32, capture_source_name: string, capture_source_from: date32, capture_source_to: date32, last_modified: date32, geom: ogc.wkb{binary}&gt;&gt;</span></span>
<span><span class="co">#&gt;  $ get_schema:function ()  </span></span>
<span><span class="co">#&gt;  $ get_next  :function (schema = x$get_schema(), validate = TRUE)  </span></span>
<span><span class="co">#&gt;  $ release   :function ()</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">stream</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;   7.388   1.390   5.895</span></span>
<span></span>
<span><span class="va">stream</span><span class="op">$</span><span class="fu">release</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">==</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt;   fid building_id name     use suburb_locality town_city territorial_authority</span></span>
<span><span class="co">#&gt; 1   1     2292051      Unknown          Marton    Marton   Rangitikei District</span></span>
<span><span class="co">#&gt; 2   2     2292353      Unknown      Durie Hill Whanganui    Whanganui District</span></span>
<span><span class="co">#&gt; 3   3     2292407      Unknown      Durie Hill Whanganui    Whanganui District</span></span>
<span><span class="co">#&gt; 4   4     2292675      Unknown        Feilding  Feilding     Manawatu District</span></span>
<span><span class="co">#&gt; 5   5     2292771      Unknown        Feilding  Feilding     Manawatu District</span></span>
<span><span class="co">#&gt; 6   6     2292825      Unknown        Feilding  Feilding     Manawatu District</span></span>
<span><span class="co">#&gt;       capture_method capture_source_group capture_source_id</span></span>
<span><span class="co">#&gt; 1 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 2 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 3 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 4 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 5 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 6 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt;                                       capture_source_name capture_source_from</span></span>
<span><span class="co">#&gt; 1 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 2 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 3 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 4 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 5 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 6 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt;   capture_source_to last_modified        geom</span></span>
<span><span class="co">#&gt; 1        2016-04-21    2019-01-04 blob[102 B]</span></span>
<span><span class="co">#&gt; 2        2016-04-21    2019-01-04 blob[102 B]</span></span>
<span><span class="co">#&gt; 3        2016-04-21    2019-01-04 blob[230 B]</span></span>
<span><span class="co">#&gt; 4        2016-04-21    2019-01-04 blob[102 B]</span></span>
<span><span class="co">#&gt; 5        2016-04-21    2019-01-04 blob[118 B]</span></span>
<span><span class="co">#&gt; 6        2016-04-21    2019-01-04 blob[102 B]</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">close</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><sup>Created on 2025-05-25 with <a href="https://reprex.tidyverse.org" class="external-link">reprex v2.1.1</a></sup></p>
</div>
<div class="section level3">
<h3 id="bench_gdalraster_fetch_conv_to_sf-r">bench_gdalraster_fetch_conv_to_sf.R<a class="anchor" aria-label="anchor" href="#bench_gdalraster_fetch_conv_to_sf-r"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usdaforestservice.github.io/gdalraster/">gdalraster</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; GDAL 3.10.3 (released 2025-04-01), GEOS 3.12.2, PROJ 9.4.1</span></span>
<span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="st">'/home/ctoney/data/gis/nz-building-outlines/nz-building-outlines.gpkg'</span></span>
<span><span class="op">(</span><span class="va">lyr</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="va">GDALVector</span>, <span class="va">f</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; C++ object of class GDALVector</span></span>
<span><span class="co">#&gt;  Driver : GeoPackage (GPKG)</span></span>
<span><span class="co">#&gt;  DSN    : /home/ctoney/data/gis/nz-building-outlines/nz-building-outlines.gpkg</span></span>
<span><span class="co">#&gt;  Layer  : nz_building_outlines</span></span>
<span><span class="co">#&gt;  CRS    : NZGD2000 / New Zealand Transverse Mercator 2000 (EPSG:2193)</span></span>
<span><span class="co">#&gt;  Geom   : MULTIPOLYGON</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3289574</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="va">d</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">fetch</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu">st_sf</span><span class="op">(</span><span class="va">d</span>, crs <span class="op">=</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">getSpatialRef</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;  54.795   1.938  56.979</span></span>
<span></span>
<span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span> <span class="op">==</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 14 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 1776318 ymin: 5544066 xmax: 1818438 ymax: 5576891</span></span>
<span><span class="co">#&gt; Projected CRS: NZGD2000 / New Zealand Transverse Mercator 2000</span></span>
<span><span class="co">#&gt;   FID building_id name     use suburb_locality town_city territorial_authority</span></span>
<span><span class="co">#&gt; 1   1     2292051      Unknown          Marton    Marton   Rangitikei District</span></span>
<span><span class="co">#&gt; 2   2     2292353      Unknown      Durie Hill Whanganui    Whanganui District</span></span>
<span><span class="co">#&gt; 3   3     2292407      Unknown      Durie Hill Whanganui    Whanganui District</span></span>
<span><span class="co">#&gt; 4   4     2292675      Unknown        Feilding  Feilding     Manawatu District</span></span>
<span><span class="co">#&gt; 5   5     2292771      Unknown        Feilding  Feilding     Manawatu District</span></span>
<span><span class="co">#&gt; 6   6     2292825      Unknown        Feilding  Feilding     Manawatu District</span></span>
<span><span class="co">#&gt;       capture_method capture_source_group capture_source_id</span></span>
<span><span class="co">#&gt; 1 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 2 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 3 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 4 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 5 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt; 6 Feature Extraction    NZ Aerial Imagery              1042</span></span>
<span><span class="co">#&gt;                                       capture_source_name capture_source_from</span></span>
<span><span class="co">#&gt; 1 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 2 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 3 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 4 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 5 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt; 6 Manawatu Whanganui 0.3m Rural Aerial Photos (2015-2016)          2015-12-27</span></span>
<span><span class="co">#&gt;   capture_source_to last_modified                           geom</span></span>
<span><span class="co">#&gt; 1        2016-04-21    2019-01-04 MULTIPOLYGON (((1796394 556...</span></span>
<span><span class="co">#&gt; 2        2016-04-21    2019-01-04 MULTIPOLYGON (((1776394 557...</span></span>
<span><span class="co">#&gt; 3        2016-04-21    2019-01-04 MULTIPOLYGON (((1776322 557...</span></span>
<span><span class="co">#&gt; 4        2016-04-21    2019-01-04 MULTIPOLYGON (((1818268 554...</span></span>
<span><span class="co">#&gt; 5        2016-04-21    2019-01-04 MULTIPOLYGON (((1818172 554...</span></span>
<span><span class="co">#&gt; 6        2016-04-21    2019-01-04 MULTIPOLYGON (((1818436 554...</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">close</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><sup>Created on 2025-05-25 with <a href="https://reprex.tidyverse.org" class="external-link">reprex v2.1.1</a></sup></p>
</div>
<div class="section level3">
<h3 id="bench_sf_read_sf-r">bench_sf_read_sf.R<a class="anchor" aria-label="anchor" href="#bench_sf_read_sf-r"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.12.2, GDAL 3.10.3, PROJ 9.4.1; sf_use_s2() is TRUE</span></span>
<span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="st">'/home/ctoney/data/gis/nz-building-outlines/nz-building-outlines.gpkg'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">read_sf</span><span class="op">(</span><span class="va">f</span>, <span class="st">"nz_building_outlines"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt; 156.162   7.710 176.556</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3289574</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 13 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 1776318 ymin: 5544066 xmax: 1818438 ymax: 5576891</span></span>
<span><span class="co">#&gt; Projected CRS: NZGD2000 / New Zealand Transverse Mercator 2000</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 14</span></span>
<span><span class="co">#&gt;   building_id name  use     suburb_locality town_city territorial_authority</span></span>
<span><span class="co">#&gt;         &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;                </span></span>
<span><span class="co">#&gt; 1     2292051 ""    Unknown Marton          Marton    Rangitikei District  </span></span>
<span><span class="co">#&gt; 2     2292353 ""    Unknown Durie Hill      Whanganui Whanganui District   </span></span>
<span><span class="co">#&gt; 3     2292407 ""    Unknown Durie Hill      Whanganui Whanganui District   </span></span>
<span><span class="co">#&gt; 4     2292675 ""    Unknown Feilding        Feilding  Manawatu District    </span></span>
<span><span class="co">#&gt; 5     2292771 ""    Unknown Feilding        Feilding  Manawatu District    </span></span>
<span><span class="co">#&gt; 6     2292825 ""    Unknown Feilding        Feilding  Manawatu District    </span></span>
<span><span class="co">#&gt; # ℹ 8 more variables: capture_method &lt;chr&gt;, capture_source_group &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   capture_source_id &lt;int&gt;, capture_source_name &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   capture_source_from &lt;date&gt;, capture_source_to &lt;date&gt;, last_modified &lt;date&gt;,</span></span>
<span><span class="co">#&gt; #   geom &lt;MULTIPOLYGON [m]&gt;</span></span></code></pre></div>
<p><sup>Created on 2025-05-25 with <a href="https://reprex.tidyverse.org" class="external-link">reprex v2.1.1</a></sup></p>
</div>
<div class="section level3">
<h3 id="bench_sf_read_sf_use_stream-r">bench_sf_read_sf_use_stream.R<a class="anchor" aria-label="anchor" href="#bench_sf_read_sf_use_stream-r"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.12.2, GDAL 3.10.3, PROJ 9.4.1; sf_use_s2() is TRUE</span></span>
<span></span>
<span><span class="va">f</span> <span class="op">&lt;-</span> <span class="st">'/home/ctoney/data/gis/nz-building-outlines/nz-building-outlines.gpkg'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">read_sf</span><span class="op">(</span><span class="va">f</span>, <span class="st">"nz_building_outlines"</span>, use_stream <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed </span></span>
<span><span class="co">#&gt;  25.749   2.556  25.295</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3289574</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 6 features and 13 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 1776318 ymin: 5544066 xmax: 1818438 ymax: 5576891</span></span>
<span><span class="co">#&gt; Projected CRS: NZGD2000 / New Zealand Transverse Mercator 2000</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 14</span></span>
<span><span class="co">#&gt;   building_id name  use     suburb_locality town_city territorial_authority</span></span>
<span><span class="co">#&gt;         &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;                </span></span>
<span><span class="co">#&gt; 1     2292051 ""    Unknown Marton          Marton    Rangitikei District  </span></span>
<span><span class="co">#&gt; 2     2292353 ""    Unknown Durie Hill      Whanganui Whanganui District   </span></span>
<span><span class="co">#&gt; 3     2292407 ""    Unknown Durie Hill      Whanganui Whanganui District   </span></span>
<span><span class="co">#&gt; 4     2292675 ""    Unknown Feilding        Feilding  Manawatu District    </span></span>
<span><span class="co">#&gt; 5     2292771 ""    Unknown Feilding        Feilding  Manawatu District    </span></span>
<span><span class="co">#&gt; 6     2292825 ""    Unknown Feilding        Feilding  Manawatu District    </span></span>
<span><span class="co">#&gt; # ℹ 8 more variables: capture_method &lt;chr&gt;, capture_source_group &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   capture_source_id &lt;int&gt;, capture_source_name &lt;chr&gt;,</span></span>
<span><span class="co">#&gt; #   capture_source_from &lt;date&gt;, capture_source_to &lt;date&gt;, last_modified &lt;date&gt;,</span></span>
<span><span class="co">#&gt; #   geom &lt;MULTIPOLYGON [m]&gt;</span></span></code></pre></div>
<p><sup>Created on 2025-05-25 with <a href="https://reprex.tidyverse.org" class="external-link">reprex v2.1.1</a></sup></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/ctoney" class="external-link">Chris Toney</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
