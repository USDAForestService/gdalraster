<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Class encapsulating a vector layer in a GDAL dataset — GDALVector-class • gdalraster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Class encapsulating a vector layer in a GDAL dataset — GDALVector-class"><meta name="description" content="GDALVector provides an interface for accessing a vector layer in a GDAL
dataset and calling methods on the underlying OGRLayer object.
An object of class GDALVector persists an open connection to the dataset,
and exposes methods for retrieving layer information, setting attribute and
spatial filters, and reading/writing feature data.
See https://gdal.org/api/index.html for details of the GDAL
Vector API.
Class GDALVector is currently under development. An initial
implementation supporting read access was added in gdalraster 1.11.1.9100.
A working document with draft specifications is available at:
https://usdaforestservice.github.io/gdalraster/articles/gdalvector-draft.html
and discussion thread/status updates at:
https://github.com/USDAForestService/gdalraster/issues/241."><meta property="og:description" content="GDALVector provides an interface for accessing a vector layer in a GDAL
dataset and calling methods on the underlying OGRLayer object.
An object of class GDALVector persists an open connection to the dataset,
and exposes methods for retrieving layer information, setting attribute and
spatial filters, and reading/writing feature data.
See https://gdal.org/api/index.html for details of the GDAL
Vector API.
Class GDALVector is currently under development. An initial
implementation supporting read access was added in gdalraster 1.11.1.9100.
A working document with draft specifications is available at:
https://usdaforestservice.github.io/gdalraster/articles/gdalvector-draft.html
and discussion thread/status updates at:
https://github.com/USDAForestService/gdalraster/issues/241."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gdalraster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.11.1.9501</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/gdal-block-cache.html">GDAL Block Cache</a></li>
    <li><a class="dropdown-item" href="../articles/gdal-config-quick-ref.html">GDAL Config Quick Reference</a></li>
    <li><a class="dropdown-item" href="../articles/gdalvector-draft.html">Draft Bindings to the GDAL/OGR Vector API</a></li>
    <li><a class="dropdown-item" href="../articles/raster-api-tutorial.html">Raster API Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/raster-attribute-tables.html">Raster Attribute Tables</a></li>
    <li><a class="dropdown-item" href="../articles/raster-display.html">Raster Display</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USDAForestService/gdalraster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Class encapsulating a vector layer in a GDAL dataset</h1>
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/gdalraster/blob/main/R/gdalvector.R" class="external-link"><code>R/gdalvector.R</code></a></small>
      <div class="d-none name"><code>GDALVector-class.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>GDALVector</code> provides an interface for accessing a vector layer in a GDAL
dataset and calling methods on the underlying <code>OGRLayer</code> object.
An object of class <code>GDALVector</code> persists an open connection to the dataset,
and exposes methods for retrieving layer information, setting attribute and
spatial filters, and reading/writing feature data.
See <a href="https://gdal.org/api/index.html" class="external-link">https://gdal.org/api/index.html</a> for details of the GDAL
Vector API.</p>
<p><strong>Class <code>GDALVector</code> is currently under development</strong>. An initial
implementation supporting read access was added in gdalraster 1.11.1.9100.
A working document with draft specifications is available at:<br><a href="https://usdaforestservice.github.io/gdalraster/articles/gdalvector-draft.html">https://usdaforestservice.github.io/gdalraster/articles/gdalvector-draft.html</a><br>
and discussion thread/status updates at:<br><a href="https://github.com/USDAForestService/gdalraster/issues/241" class="external-link">https://github.com/USDAForestService/gdalraster/issues/241</a>.</p>
    </div>


    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dsn">dsn<a class="anchor" aria-label="anchor" href="#arg-dsn"></a></dt>
<dd><p>Character string containing the data source name (DSN), usually a
filename or database connection string.</p></dd>


<dt id="arg-layer">layer<a class="anchor" aria-label="anchor" href="#arg-layer"></a></dt>
<dd><p>Character string containing the name of a layer within the
data source. May also be given as an SQL SELECT statement to be executed
against the data source, defining a layer as the result set.</p></dd>


<dt id="arg-read-only">read_only<a class="anchor" aria-label="anchor" href="#arg-read-only"></a></dt>
<dd><p>Logical scalar. <code>TRUE</code> to open the layer read-only (the
default), or <code>FALSE</code> to open with write access.</p></dd>


<dt id="arg-open-options">open_options<a class="anchor" aria-label="anchor" href="#arg-open-options"></a></dt>
<dd><p>Optional character vector of <code>NAME=VALUE</code> pairs
specifying dataset open options.</p></dd>


<dt id="arg-spatial-filter">spatial_filter<a class="anchor" aria-label="anchor" href="#arg-spatial-filter"></a></dt>
<dd><p>Optional character string containing a geometry in
Well Known Text (WKT) format which represents a spatial filter.</p></dd>


<dt id="arg-dialect">dialect<a class="anchor" aria-label="anchor" href="#arg-dialect"></a></dt>
<dd><p>Optional character string to control the statement dialect
when SQL is used to define the layer. By default, the OGR SQL engine will
be used, except for RDBMS drivers that will use their dedicated SQL engine,
unless <code>"OGRSQL"</code> is explicitly passed as the dialect. The <code>"SQLITE"</code>
dialect can also be used.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>GDALVector</code> which contains pointers to the
opened layer and the dataset that owns it, and methods that operate on
the layer as described in Details. <code>GDALVector</code> is a C++ class exposed
directly to R (via <code>RCPP_EXPOSED_CLASS</code>). Fields and methods of the class
are accessed using the <code>$</code> operator. Note that all arguments to exposed
class methods are required (but do not have to be named). The read/write
fields are per-object settings which can be changed as needed during the
lifetime of the object.</p>
    </div>
    <div class="section level2">
    <h2 id="usage-see-details-">Usage (see Details)<a class="anchor" aria-label="anchor" href="#usage-see-details-"></a></h2>


<div class="sourceCode"><pre><code><span></span>
<span><span class="co">## Constructors</span></span>
<span><span class="co"># for single-layer file formats such as shapefile</span></span>
<span><span class="va">lyr</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="va">GDALVector</span>, <span class="va">dsn</span><span class="op">)</span></span>
<span><span class="co"># specifying the layer name, or SQL statement defining the layer</span></span>
<span><span class="va">lyr</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="va">GDALVector</span>, <span class="va">dsn</span>, <span class="va">layer</span><span class="op">)</span></span>
<span><span class="co"># for update access</span></span>
<span><span class="va">lyr</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="va">GDALVector</span>, <span class="va">dsn</span>, <span class="va">layer</span>, read_only <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># using dataset open options</span></span>
<span><span class="va">lyr</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="va">GDALVector</span>, <span class="va">dsn</span>, <span class="va">layer</span>, <span class="va">read_only</span>, <span class="va">open_options</span><span class="op">)</span></span>
<span><span class="co"># setting a spatial filter and/or specifying the SQL dialect</span></span>
<span><span class="va">lyr</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="va">GDALVector</span>, <span class="va">dsn</span>, <span class="va">layer</span>, <span class="va">read_only</span>, <span class="va">open_options</span>, <span class="va">spatial_filter</span>, <span class="va">dialect</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Read/write fields (per-object settings)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="va">defaultGeomFldName</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="va">promoteToMulti</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="va">quiet</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="va">returnGeomAs</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="va">wkbByteOrder</span></span>
<span></span>
<span><span class="co">## Methods</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">open</span><span class="op">(</span><span class="va">read_only</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">isOpen</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getDsn</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFileList</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getDriverShortName</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getDriverLongName</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getName</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFieldNames</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">testCapability</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFIDColumn</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getGeomType</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getGeometryColumn</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getSpatialRef</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">bbox</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getLayerDefn</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">setAttributeFilter</span><span class="op">(</span><span class="va">query</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getAttributeFilter</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">setIgnoredFields</span><span class="op">(</span><span class="va">fields</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">setSelectedFields</span><span class="op">(</span><span class="va">fields</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">setSpatialFilter</span><span class="op">(</span><span class="va">wkt</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">setSpatialFilterRect</span><span class="op">(</span><span class="va">bbox</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getSpatialFilter</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">clearSpatialFilter</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getNextFeature</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">setNextByIndex</span><span class="op">(</span><span class="va">i</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeature</span><span class="op">(</span><span class="va">fid</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">resetReading</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">fetch</span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">setFeature</span><span class="op">(</span><span class="va">feature</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">createFeature</span><span class="op">(</span><span class="va">feature</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">upsertFeature</span><span class="op">(</span><span class="va">feature</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">getLastWriteFID</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">deleteFeature</span><span class="op">(</span><span class="va">fid</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">syncToDisk</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">startTransaction</span><span class="op">(</span><span class="va">force</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">commitTransaction</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">rollbackTransaction</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ds</span><span class="op">$</span><span class="fu">getMetadata</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ds</span><span class="op">$</span><span class="fu">setMetadata</span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span></span>
<span><span class="va">ds</span><span class="op">$</span><span class="fu">getMetadataItem</span><span class="op">(</span><span class="va">mdi_name</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lyr</span><span class="op">$</span><span class="fu">close</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>

    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>


<div class="section">
<h3 id="constructors">Constructors<a class="anchor" aria-label="anchor" href="#constructors"></a></h3>


<p><code>new(GDALVector, dsn)</code><br>
The first layer by index is assumed if the <code>layer</code> argument is omitted, so
this form of the constructor might be used for single-layer formats like
shapefile.</p>
<p><code>new(GDALVector, dsn, layer)</code><br>
Constructor specifying the name of a layer to open. The <code>layer</code> argument
may also be given as an SQL SELECT statement to define a layer as the result
set.</p>
<p><code>new(GDALVector, dsn, layer, read_only)</code><br>
Constructor specifying read/write access (<code>read_only = {TRUE|FALSE})</code>.
The <code>layer</code> argument is required in this form of the constructor, but may be
given as empty string (<code>""</code>), in which case the first layer by index will be
assumed.</p>
<p><code>new(GDALVector, dsn, layer, read_only, open_options)</code><br>
Constructor specifying dataset open options as a character vector of
<code>NAME=VALUE</code> pairs.</p>
<p><code>new(GDALVector, dsn, layer, read_only, open_options, spatial_filter, dialect))</code><br>
Constructor to specify a spatial filter and/or SQL dialect. All arguments
are required in this form of the constructor, but <code>open_options</code> may be
<code>NULL</code>, and <code>spatial_filter</code> or <code>dialect</code> may be an empty string (<code>""</code>).</p>
</div>

<div class="section">
<h3 id="read-write-fields">Read/write fields<a class="anchor" aria-label="anchor" href="#read-write-fields"></a></h3>


<p><code>$defaultGeomFldName</code><br>
Character string specifying a name to use for returned columns when the
geometry column name in the source layer is empty, like with shapefiles etc.
Defaults to <code>"geometry"</code>.</p>
<p><code>$promoteToMulti</code><br>
A logical value specifying whether to automatically promote geometries from
Polygon to MultiPolygon, Point to MultiPoint, or LineString to
MultiLineString during read operations (i.e., with methods <code>$getFeature()</code>,
<code>$getNextFeature()</code>, <code>$fetch()</code>). Defaults to <code>FALSE</code>. Setting to <code>TRUE</code> may
be useful when reading from layers such as shapefiles that mix, e.g.,
Polygons and MultiPolygons.</p>
<p><code>$quiet</code><br>
A logical value, <code>FALSE</code> by default. Set to <code>TRUE</code> to suppress various
messages and warnings.</p>
<p><code>$returnGeomAs</code><br>
Character string specifying the return format of feature geometries.
Must be one of <code>WKB</code> (the default), <code>WKB_ISO</code>, <code>WKT</code>, <code>WKT_ISO</code>, <code>BBOX</code>, or
<code>NONE</code>.
Using <code>WKB</code>/<code>WKT</code> exports as 99-402 extended dimension (Z) types for Point,
LineString, Polygon, MultiPoint, MultiLineString, MultiPolygon and
GeometryCollection. For other geometry types, it is equivalent to using
<code>WKB_ISO</code>/<code>WKT_ISO</code> (see <a href="https://libgeos.org/specifications/wkb/" class="external-link">https://libgeos.org/specifications/wkb/</a>).
Using <code>BBOX</code> exports as a list of numeric vectors, each of length 4 with values
<code>xmin, ymin, xmax, ymax</code>. If an empty geometry is encountered these values will
be <code>NA_real_</code> in the corresponding location.
Using <code>NONE</code> will result in no geometry value being present in the feature
returned.</p>
<p><code>$wkbByteOrder</code><br>
Character string specifying the byte order for WKB geometries.
Must be either <code>LSB</code> (Least Significant Byte first, the default) or
<code>MSB</code> (Most Significant Byte first).</p>
</div>

<div class="section">
<h3 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h3>


<p><code>$open(read_only)</code><br>
(Re-)opens the vector layer on the existing DSN. Use this method to
open a layer that has been closed using <code>$close()</code>. May be used to
re-open a layer with a different read/write access (<code>read_only</code> set to
<code>TRUE</code> or <code>FALSE</code>). The method will first close an open dataset, so it is
not required to call <code>$close()</code> explicitly in this case.
No return value, called for side effects.</p>
<p><code>$isOpen()</code><br>
Returns a <code>logical</code> scalar indicating whether the vector dataset is open.</p>
<p><code>$getDsn()</code><br>
Returns a character string containing the <code>dsn</code> associated with this
<code>GDALVector</code> object (<code>dsn</code> originally used to open the layer).</p>
<p><code>$getFileList()</code><br>
Returns a character vector of files believed to be part of the data source.
If it returns an empty string (<code>""</code>) it means there is believed to be no
local file system files associated with the dataset (e.g., a virtual file
system). The returned filenames will normally be relative or absolute
paths depending on the path used to originally open the dataset.</p>
<p><code>$getDriverShortName()</code><br>
Returns the short name of the vector format driver.</p>
<p><code>$getDriverLongName()</code><br>
Returns the long name of the vector format driver.</p>
<p><code>$getName()</code><br>
Returns the layer name.</p>
<p><code>$getFieldNames()</code><br>
Returns a character vector of the layer's field names.</p>
<p><code>$testCapability()</code><br>
Tests whether the layer supports named capabilities based on the current
read/write access. Returns a list of capabilities with values <code>TRUE</code> or
<code>FALSE</code>. The returned list contains the following named elements:
<code>RandomRead</code>, <code>SequentialWrite</code>, <code>RandomWrite</code>, <code>UpsertFeature</code>,
<code>FastSpatialFilter</code>, <code>FastFeatureCount</code>, <code>FastGetExtent</code>,
<code>FastSetNextByIndex</code>, <code>CreateField</code>, <code>CreateGeomField</code>, <code>DeleteField</code>,
<code>ReorderFields</code>, <code>AlterFieldDefn</code>, <code>AlterGeomFieldDefn</code>, <code>DeleteFeature</code>,
<code>StringsAsUTF8</code>, <code>Transactions</code>, <code>CurveGeometries</code>.
(See the GDAL documentation for
<a href="https://gdal.org/api/vector_c_api.html#_CPPv420OGR_L_TestCapability9OGRLayerHPKc" class="external-link"><code>OGR_L_TestCapability()</code></a>.)</p>
<p><code>$getFIDColumn()</code><br>
Returns the name of the underlying database column being used as the FID
column, or empty string (<code>""</code>) if not supported.</p>
<p><code>$getGeomType()</code><br>
Returns the well known name of the layer geometry type as character string.
For layers with multiple geometry fields, this method only returns the
geometry type of the first geometry column. For other columns, use
<code>$getLayerDefn()</code>. For layers without any geometry field, this method
returns <code>"NONE"</code>.</p>
<p><code>$getGeometryColumn()</code><br>
Returns he name of the underlying database column being used as the geometry
column, or an empty string (<code>""</code>) if not supported.
For layers with multiple geometry fields, this method only returns the
name of the first geometry column. For other columns, use <code>$getLayerDefn()</code>.</p>
<p><code>$getSpatialRef()</code><br>
Returns a WKT string containing the spatial reference system for this layer,
or empty string (<code>""</code>) if no spatial reference exists.</p>
<p><code>$bbox()</code><br>
Returns a numeric vector of length four containing the bounding box
for this layer (xmin, ymin, xmax, ymax). Note that <code>bForce = true</code> is set in
the underlying API call to <code>OGR_L_GetExtent()</code>, so the entire layer may be
scanned to compute a minimum bounding rectangle (see <code>FastGetExtent</code> in the
list returned by <code>$testCapability()</code>). Depending on the format driver, a
spatial filter may or may not be taken into account, so it is safer to call
<code>$bbox()</code> without setting a spatial filter.</p>
<p><code>$getLayerDefn()</code><br>
Returns a list containing the OGR feature class definition for this layer
(a.k.a. layer definition). The list contains zero or more attribute field
definitions, along with one or more geometry field definitions.
See <a href="ogr_define.html">ogr_define</a> for details of the field and feature class definitions.</p>
<p><code>$setAttributeFilter(query)</code><br>
Sets an attribute query string to be used when fetching features via the
<code>$getNextFeature()</code> or <code>$fetch()</code> methods.
Only features for which <code>query</code> evaluates as true will be returned.
The query string should be in the format of an SQL WHERE clause, described
in the <a href="https://gdal.org/user/ogr_sql_dialect.html#where" class="external-link">"WHERE"</a>
section of the OGR SQL dialect documentation (e.g.,
<code>"population &gt; 1000000 and population &lt; 5000000"</code>, where <code>population</code> is an
attribute in the layer).
In some cases (RDBMS backed drivers, SQLite, GeoPackage) the native
capabilities of the database may be used to to interpret the WHERE clause,
in which case the capabilities will be broader than those of OGR SQL.
Note that installing a query string will generally result in resetting the
current reading position (as with <code>$resetReading()</code> described below).
The <code>query</code> parameter may be set to empty string (<code>""</code>) to clear the current
attribute filter.</p>
<p><code>$getAttributeFilter()</code><br>
Returns the attribute query string currently in use, or empty string (<code>""</code>)
if an attribute filter is not set.</p>
<p><code>$setIgnoredFields(fields)</code><br>
Set which fields can be omitted when retrieving features from the layer.
The <code>fields</code> argument is a character vector of field names. Passing an
empty string (<code>""</code>) for <code>fields</code> will reset to no ignored fields.
If the format driver supports this functionality (testable using
<code>$testCapability()$IgnoreFields</code>), it will not fetch the specified fields
in subsequent calls to <code>$getFeature()</code> / <code>$getNextFeature()</code> / <code>$fetch()</code>,
and thus save some processing time and/or bandwidth. Besides field names of
the layer, the following special fields can be passed: <code>"OGR_GEOMETRY"</code> to
ignore geometry and <code>"OGR_STYLE"</code> to ignore layer style. By default, no
fields are ignored. Note that fields that are used in an attribute filter
should generally not be set as ignored fields, as most drivers (such as
those relying on the OGR SQL engine) will be unable to correctly evaluate
the attribute filter. No return value, called for side effects.</p>
<p><code>$setSelectedFields(fields)</code><br>
Set which fields will be included when retrieving features from the layer.
The <code>fields</code> argument is a character vector of field names. Passing an
empty string (<code>""</code>) for <code>fields</code> will reset to no ignored fields.
See the <code>$setIgnoredFields()</code> method above for more information. The data
source must provide IgnoreFields capability in order to set selected
fields. Note that geometry fields, if desired, must be specified when setting
selected fields, either by including named geometry field(s) or the special
field <code>"OGR_GEOMETRY"</code> in the <code>fields</code> argument.
No return value, called for side effects.</p>
<p><code>$setSpatialFilter(wkt)</code><br>
Sets a new spatial filter from a geometry in WKT format. This method sets
the geometry to be used as a spatial filter when fetching features via the
<code>$getNextFeature()</code> or <code>$fetch()</code> methods. Only features that geometrically
intersect the filter geometry will be returned. Currently this test may be
inaccurately implemented (depending on the vector format driver), but it is
guaranteed that all features whose envelope overlaps the envelope of the
spatial filter will be returned. This can result in more shapes being
returned that should strictly be the case.
<code>wkt</code> is a character string containing a WKT geometry in the same coordinate
system as the layer. An empty string (<code>""</code>) may be passed indicating that
the current spatial filter should be cleared, but no new one instituted.</p>
<p><code>$setSpatialFilterRect(bbox)</code><br>
Sets a new rectangular spatial filter. This method sets a rectangle to be
used as a spatial filter when fetching features via the <code>$getNextFeature()</code>
or <code>$fetch()</code> methods. Only features that geometrically intersect the given
rectangle will be returned.
<code>bbox</code> is a numeric vector of length four containing xmin, ymin, xmax, ymax
in the same coordinate system as the layer as a whole (as returned by
<code>$getSpatialRef()</code>).</p>
<p><code>$getSpatialFilter()</code><br>
Returns the current spatial filter geometry as a WKT string, or empty string
(<code>""</code>) if a spatial filter is not set.</p>
<p><code>$clearSpatialFilter()</code><br>
Clears a spatial filter that was set with <code>$setSpatialFilterRect()</code>.
No return value, called for that side effect.</p>
<p><code>$getFeatureCount()</code><br>
Returns the number of features in the layer. For dynamic databases the count
may not be exact. This method forces a count in the underlying API call
(i.e., <code>bForce = TRUE</code> in the call to <code>OGR_L_GetFeatureCount()</code>). Note that
some vector drivers will actually scan the entire layer once to count
features. The <code>FastFeatureCount</code> element in the list returned by
the <code>$testCapability()</code> method can be checked if this might be a concern.
The number of features returned takes into account the spatial and/or
attribute filters. Some driver implementations of this method may alter the
read cursor of the layer.</p>
<p><code>$getNextFeature()</code><br>
Fetch the next available feature from this layer. Only features matching the
current spatial and/or attribute filter (if defined) will be returned.
This method implements sequential access to the features of a layer.
The <code>$resetReading()</code> method can be used to start at the beginning again.
Returns a list with the unique feature identifier (FID), the attribute and
geometry field names, and their values. The returned list carries the
<code>OGRFeature</code> class attribute with S3 methods for for <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> and <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>.
<code>NULL</code> is returned if no more features are available.</p>
<p><code>$setNextByIndex(i)</code><br>
Moves the read cursor to the <code>i</code>th feature in the current result set
(with 0-based indexing).
This method allows positioning of a layer such that a call to
<code>$getNextFeature()</code> or <code>fetch()</code> will read the requested feature(s), where
<code>i</code> is an absolute index into the current result set. So, setting <code>i = 3</code>
would mean the next feature read with <code>$getNextFeature()</code> would have been
the 4th feature read if sequential reading took place from the beginning of
the layer, including accounting for spatial and attribute filters.
This method is not implemented efficiently by all vector format drivers. The
default implementation simply resets reading to the beginning and then calls
<code>GetNextFeature()</code> <code>i</code> times.
To determine if fast seeking is available on the current layer, check
the <code>FastSetNextByIndex</code> element in the list returned by the
<code>$testCapability()</code> method. No return value, called for side effect.</p>
<p><code>$getFeature(fid)</code><br>
Returns a feature by its identifier. The value of <code>fid</code> must be a numeric
scalar, optionally carrying the <code><a href="https://rdrr.io/pkg/bit64/man/bit64-package.html" class="external-link">bit64::integer64</a></code> class attribute.
Success or failure of this operation is unaffected by any spatial or
attribute filters that may be in effect.
The <code>RandomRead</code> element in the list returned by <code>$testCapability()</code> can
be checked to establish if this layer supports efficient random access
reading; however, the call should always work if the feature exists since a
fallback implementation just scans all the features in the layer looking for
the desired feature. Returns a list with the unique feature identifier (FID),
the attribute and geometry field names, and their values, or <code>NULL</code> on
failure. Note that sequential reads (with <code>$getNextFeature()</code>) are generally
considered interrupted by a call to <code>$getFeature()</code>.</p>
<p><code>$resetReading()</code><br>
Reset feature reading to start on the first feature. No return value, called
for that side effect.</p>
<p><code>$fetch(n)</code><br>
Fetches the next <code>n</code> features from the layer and returns them as a data
frame. This allows retrieving the entire set of features, one page of
features at a time, or the remaining features (from the current cursor
position). Returns a data frame with as many rows as features were fetched,
and as many columns as attribute plus geometry fields in the result set,
even if the result is a single value or has one or zero rows.
The returned data frame carries the <code>OGRFeatureSet</code> class attribute with S3
methods for for <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> and <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>.</p>
<p>This method is an analog of
<a href="https://dbi.r-dbi.org/reference/dbFetch.html" class="external-link"><code>DBI::dbFetch()</code></a>.</p>
<p>The <code>n</code> argument is the maximum number of features to retrieve per fetch
given as <code>integer</code> or <code>numeric</code> but assumed to be a whole number (will
be truncated). Use <code>n = -1</code> or <code>n = Inf</code> to retrieve all pending features
(resets reading to the first feature).
Otherwise, <code>$fetch()</code> can be called multiple times to perform forward paging
from the current cursor position. Passing <code>n = NA</code> is also supported and
returns the remaining features.
Fetching zero features is possible to retrieve the structure of the feature
set as a data frame (columns fully typed).</p>
<p>OGR field types are returned as the following R types (<code>NA</code> for OGR NULL
values):</p><ul><li><p><code>OFTInteger</code>: <code>integer</code></p></li>
<li><p><code>OFTInteger</code> subtype <code>OFSTBoolean</code>: <code>logical</code></p></li>
<li><p><code>OFTIntegerList</code>: vector of <code>integer</code> (list column)</p></li>
<li><p><code>OFTInteger64</code>: <code>numeric</code> carrying <code>"integer64"</code> class attribute {bit64}</p></li>
<li><p><code>OFTInteger64</code> subtype <code>OFSTBoolean</code>: <code>logical</code></p></li>
<li><p><code>OFTInteger64List</code>: vector of <code><a href="https://rdrr.io/pkg/bit64/man/bit64-package.html" class="external-link">bit64::integer64</a></code> (list column)</p></li>
<li><p><code>OFTReal</code>: <code>numeric</code></p></li>
<li><p><code>OFTRealList</code>: vector of <code>numeric</code> (list column)</p></li>
<li><p><code>OFTString</code>: <code>character</code> string</p></li>
<li><p><code>OFTStringList</code>: vector of <code>character</code> strings (list column)</p></li>
<li><p><code>OFTDate</code>: class <code>"Date"</code> (<code>numeric</code>)</p></li>
<li><p><code>OFTDateTime</code>: class <code>"POSIXct"</code> (<code>numeric</code>, millisecond accuracy)</p></li>
<li><p><code>OFTTime</code>: <code>character</code> string (<code>"HH:MM:SS"</code>)</p></li>
<li><p><code>OFTBinary</code>: <code>raw</code> vector (list column, <code>NULL</code> entries for OGR NULL values)</p></li>
</ul><p>Geometries are not returned if the field <code>returnGeomAs</code> is set to <code>NONE</code>.
Omitting the geometries may be beneficial for performance and memory usage
when access only to feature attributes is needed. Geometries are returned
as <code>raw</code> vectors in a data frame list column when <code>returnGeomAs</code> is set to
<code>WKB</code> (the default) or <code>WKB_ISO</code>, or as <code>character</code> strings when
<code>returnGeomAs</code> is set to one of <code>WKT</code> or <code>WKT_ISO</code>.</p>
<p>Note that <code>$getFeatureCount()</code> is called internally when fetching the full
feature set or all remaining features (but not for a page of features).</p>
<p><code>$setFeature(feature)</code><br>
Rewrites/replaces an existing feature. This method writes a feature based on
the feature id within the input feature. The <code>feature</code> argument is a named
list of fields and their values, and must include a <code>$FID</code> element
referencing the existing feature to rewrite. The <code>RandomWrite</code> element in
the list returned by <code>$testCapability()</code> can be checked to establish if this
layer supports random access writing via <code>$setFeature()</code>.
The way omitted fields in the passed <code>feature</code> are processed is driver
dependent:</p><ul><li><p>SQL-based drivers which implement set feature through SQL UPDATE will skip
unset fields, and thus the content of the existing feature will be
preserved.</p></li>
<li><p>The shapefile driver will write a NULL value in the DBF file.</p></li>
<li><p>The GeoJSON driver will take into account unset fields to remove the
corresponding JSON member.</p></li>
</ul><p>Returns logical <code>TRUE</code> upon successful completion, or <code>FALSE</code> if setting the
feature did not succeed. The FID of the last feature written to the layer
may be obtained with the method <code>$getLastWriteFID()</code> (see below). To set a
feature, but create it if it doesn't exist see the <code>$upsertFeature()</code> method.</p>
<p><code>$createFeature(feature)</code><br>
Creates and writes a new feature within the layer. The <code>feature</code> argument is
a named list of fields and their values.
The passed feature is written to the layer as a new feature, rather than
overwriting an existing one. If the feature has a <code>$FID</code> element other than
<code>NA</code>, then the vector format driver may use that as the feature id of the
new feature, but not necessarily. The FID of the last feature written
to the layer may be obtained with the method <code>$getLastWriteFID()</code> (see
below).
Returns logical <code>TRUE</code> upon successful completion, or <code>FALSE</code> if creating
the feature did not succeed. To create a feature, but set it if it already
exists see the <code>$upsertFeature()</code> method.</p>
<p><code>$upsertFeature(feature)</code><br>
Rewrites/replaces an existing feature or creates a new feature within the
layer. This method will write a feature to the layer, based on the feature
id within the input feature. The <code>feature</code> argument is a named list of
fields and their values, potentially including a <code>$FID</code> element referencing
an existing feature to rewrite. If the feature id doesn't exist a new
feature will be written. Otherwise, the existing feature will be rewritten.
The <code>UpsertFeature</code> element in the list returned by <code>$testCapability()</code> can
be checked to determine if this layer supports upsert writing. See
<code>$setFeature()</code> above for a description of how omitted fields in the passed
<code>feature</code> are processed.
Returns logical <code>TRUE</code> upon successful completion, or <code>FALSE</code> if upserting
the feature did not succeed. Requires GDAL &gt;= 3.6.</p>
<p><code>$getLastWriteFID()</code><br>
Returns the FID of the last feature written (either newly created or updated
existing). <code>NULL</code> is returned if no features have been written in the layer.
Note that OGRNullFID (<code>-1</code>) may be returned after writing a feature in some
formats. This is the case if a FID has not been assigned yet, and generally
does not indicate an error (e.g., formats that do not store a persistent FID
and assign FIDs upon a sequential read operation). The returned FID is a
numeric scalar carrying the <code><a href="https://rdrr.io/pkg/bit64/man/bit64-package.html" class="external-link">bit64::integer64</a></code> class attribute.</p>
<p><code>$deleteFeature(fid)</code><br>
Deletes a feature from the layer. The feature with the indicated feature ID
is deleted from the layer if supported by the format driver. The value of
<code>fid</code> must be a numeric scalar, optionally carrying the <code><a href="https://rdrr.io/pkg/bit64/man/bit64-package.html" class="external-link">bit64::integer64</a></code>
class attribute (should be a whole number, will be truncated).
The <code>DeleteFeature</code> element in the list returned by <code>$testCapability()</code> can
be checked to establish if this layer has delete feature capability. Returns
logical <code>TRUE</code> if the operation succeeds, or <code>FALSE</code> on failure.</p>
<p><code>$syncToDisk()</code><br>
Flushes pending changes to disk. This call is intended to force the layer to
flush any pending writes to disk, and leave the disk file in a consistent
state. It would not normally have any effect on read-only datasources. Some
formats do not implement this method, and will still return no error. An
error is only returned if an error occurs while attempting to flush to disk.
In any event, you should always close any opened datasource with <code>$close()</code>
which will ensure all data is correctly flushed. Returns logical <code>TRUE</code> if
no error occurs (even if nothing is done) or <code>FALSE</code> on error.</p>
<p><code>$startTransaction(force)</code><br>
Creates a transaction if supported by the vector data source. The <code>force</code>
argument is a logical value. If <code>force = FALSE</code>, only "efficient"
transactions will be attempted. Some drivers may offer an emulation of
transactions, but sometimes with significant overhead, in which case the
user must explicitly allow for such an emulation by setting <code>force =TRUE</code>.
The function <code><a href="ogr_manage.html">ogr_ds_test_cap()</a></code> can be used to determine whether a vector
data source supports efficient or emulated transactions.</p>
<p>All changes done after the start of the transaction are definitely applied
in the data source if <code>$commitTransaction()</code> is called. They can be canceled
by calling <code>rollbackTransaction()</code> instead.
Nested transactions are not supported. Transactions are implemented at the
dataset level, so multiple <code>GDALVector</code> objects using the same data source
should not have transactions active at the same time.</p>
<p>In case <code>$startTransaction()</code> fails, neither <code>$commitTransaction()</code> nor
<code>$rollbackTransaction()</code> should be called.
If an error occurs after a successful <code>$startTransaction()</code>, the whole
transaction may or may not be implicitly canceled, depending on the format
driver (e.g., the PostGIS driver will cancel it, SQLite/GPKG will not). In
any case, in the event of an error, an explicit call to
<code>rollbackTransaction()</code> should be done to keep things balanced.</p>
<p>Returns logical <code>TRUE</code> if the transaction is created, or <code>FALSE</code> on failure.</p>
<p><code>$commitTransaction()</code><br>
Commits a transaction if supported by the vector data source.
Returns a logical value, <code>TRUE</code> if the transaction is successfully committed.
Returns <code>FALSE</code> if no transaction is active, or the rollback fails, or if the
data source does not support transactions.
Depending on the format driver, this may or may not abort layer sequential
reading that may be active.</p>
<p><code>$rollbackTransaction()</code><br>
Rolls back a data source to its state before the start of the current
transaction, if transactions are supported by the data source.
Returns a logical value, <code>TRUE</code> if the transaction is successfully rolled
back. Returns <code>FALSE</code> if no transaction is active, or the rollback fails,
or if the data source does not support transactions.</p>
<p><code>$getMetadata()</code><br>
Returns a character vector of all metadata <code>NAME=VALUE</code> pairs for the
layer or empty string (<code>""</code>) if there are no metadata items.</p>
<p><code>$setMetadata(metadata)</code><br>
Sets metadata on the layer if the format supports it. The <code>metadata</code>
argument is given as a character vector of <code>NAME=VALUE</code> pairs.
Returns logical <code>TRUE</code> on success or <code>FALSE</code> if metadata could
not be set.</p>
<p><code>$getMetadataItem(mdi_name)</code><br>
Returns the value of a specific metadata item named <code>mdi_name</code>, or empty
string (<code>""</code>) if no matching item is found.</p>
<p><code>$close()</code><br>
Closes the vector dataset (no return value, called for side effects).
Calling <code>$close()</code> results in proper cleanup, and flushing of any
pending writes.
The <code>GDALVector</code> object is still available after calling <code>$close()</code>.
The layer can be re-opened on the existing <code>dsn</code> with
<code>$open(read_only = {TRUE|FALSE})</code>.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="ogr_define.html">ogr_define</a>, <a href="ogr_manage.html">ogr_manage</a>, <code><a href="ogr2ogr.html">ogr2ogr()</a></code>, <code><a href="ogrinfo.html">ogrinfo()</a></code></p>
<p>GDAL vector format descriptions:<br><a href="https://gdal.org/drivers/vector/index.html" class="external-link">https://gdal.org/drivers/vector/index.html</a></p>
<p>GDAL-supported SQL dialects:<br><a href="https://gdal.org/user/ogr_sql_sqlite_dialect.html" class="external-link">https://gdal.org/user/ogr_sql_sqlite_dialect.html</a>)</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## MTBS fire perimeters in Yellowstone National Park 1984-2022</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ynp_fires_1984_2022.gpkg"</span>, package <span class="op">=</span> <span class="st">"gdalraster"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## copy to a temporary file that is writeable</span></span></span>
<span class="r-in"><span><span class="va">dsn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="va">f</span>, <span class="va">dsn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyr</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="va">GDALVector</span>, <span class="va">dsn</span>, <span class="st">"mtbs_perims"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## object of class GDALVector</span></span></span>
<span class="r-in"><span><span class="va">lyr</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> C++ object &lt;0x55fd03a5cc40&gt; of class 'GDALVector' &lt;0x55fd00ffe8d0&gt;</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">lyr</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reference class 'Rcpp_GDALVector' [package "gdalraster"] with 8 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ defaultGeomFldName: chr "geometry"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ m_dialect         : chr ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ m_is_sql          : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ m_layer_name      : chr "mtbs_perims"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ promoteToMulti    : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ quiet             : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ returnGeomAs      : chr "WKB"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ wkbByteOrder      : chr "LSB"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  and 66 methods, of which 52 are  possibly relevant:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    OGRFeatureFromList_dumpReadble, bbox, clearSpatialFilter, close,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    commitTransaction, createFeature, deleteFeature, fetch, finalize,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    getAttributeFilter, getDriverLongName, getDriverShortName, getDsn,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    getFIDColumn, getFeature, getFeatureCount, getFieldNames, getFileList,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    getGeomType, getGeometryColumn, getLastWriteFID, getLayerDefn, getMetadata,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    getMetadataItem, getName, getNextFeature, getSpatialFilter, getSpatialRef,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    initialize, isOpen, layerClip, layerErase, layerIdentity, layerIntersection,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    layerSymDifference, layerUnion, layerUpdate, open, resetReading,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    rollbackTransaction, setAttributeFilter, setFeature, setIgnoredFields,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    setMetadata, setNextByIndex, setSelectedFields, setSpatialFilter,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    setSpatialFilterRect, startTransaction, syncToDisk, testCapability,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    upsertFeature</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## dataset info</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getDriverShortName</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "GPKG"</span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getDriverLongName</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "GeoPackage"</span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFileList</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/tmp/Rtmpc9VA3S/ynp_fires_1984_2022.gpkg"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## layer info</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getName</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "mtbs_perims"</span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getGeomType</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "MULTIPOLYGON"</span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getGeometryColumn</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "geom"</span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFIDColumn</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "fid"</span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getSpatialRef</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "PROJCS[\"NAD83 / Montana\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS 1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4269\"]],PROJECTION[\"Lambert_Conformal_Conic_2SP\"],PARAMETER[\"latitude_of_origin\",44.25],PARAMETER[\"central_meridian\",-109.5],PARAMETER[\"standard_parallel_1\",49],PARAMETER[\"standard_parallel_2\",45],PARAMETER[\"false_easting\",600000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH],AUTHORITY[\"EPSG\",\"32100\"]]"</span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">bbox</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 469685.73 -12917.76 573531.72  96577.34</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## layer capabilities</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">testCapability</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $RandomRead</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $SequentialWrite</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $RandomWrite</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $FastSpatialFilter</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $FastFeatureCount</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $FastGetExtent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $FastSetNextByIndex</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $CreateField</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $CreateGeomField</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $DeleteField</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ReorderFields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $AlterFieldDefn</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $IgnoreFields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $DeleteFeature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $StringsAsUTF8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $CurveGeometries</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## re-open with write access</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">open</span><span class="op">(</span>read_only <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">testCapability</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">SequentialWrite</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">testCapability</span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">RandomWrite</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## feature class definition - a list of field names and their definitions</span></span></span>
<span class="r-in"><span><span class="va">defn</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">getLayerDefn</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">defn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "event_id"     "incid_name"   "incid_type"   "map_id"       "burn_bnd_ac" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "burn_bnd_lat" "burn_bnd_lon" "ig_date"      "ig_year"      "geom"        </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">defn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ event_id    :List of 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type       : chr "OFTString"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ subtype    : chr "OFSTNone"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ width      : int 254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ precision  : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_nullable: logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_unique  : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ default    : chr ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_geom    : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ incid_name  :List of 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type       : chr "OFTString"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ subtype    : chr "OFSTNone"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ width      : int 254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ precision  : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_nullable: logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_unique  : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ default    : chr ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_geom    : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ incid_type  :List of 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type       : chr "OFTString"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ subtype    : chr "OFSTNone"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ width      : int 254</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ precision  : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_nullable: logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_unique  : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ default    : chr ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_geom    : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ map_id      :List of 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type       : chr "OFTInteger64"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ subtype    : chr "OFSTNone"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ width      : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ precision  : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_nullable: logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_unique  : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ default    : chr ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_geom    : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ burn_bnd_ac :List of 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type       : chr "OFTInteger64"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ subtype    : chr "OFSTNone"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ width      : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ precision  : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_nullable: logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_unique  : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ default    : chr ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_geom    : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ burn_bnd_lat:List of 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type       : chr "OFTString"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ subtype    : chr "OFSTNone"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ width      : int 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ precision  : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_nullable: logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_unique  : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ default    : chr ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_geom    : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ burn_bnd_lon:List of 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type       : chr "OFTString"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ subtype    : chr "OFSTNone"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ width      : int 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ precision  : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_nullable: logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_unique  : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ default    : chr ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_geom    : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ig_date     :List of 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type       : chr "OFTDate"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ subtype    : chr "OFSTNone"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ width      : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ precision  : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_nullable: logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_unique  : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ default    : chr ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_geom    : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ig_year     :List of 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type       : chr "OFTInteger"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ subtype    : chr "OFSTNone"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ width      : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ precision  : int 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_nullable: logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_unique  : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ default    : chr ""</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_geom    : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ geom        :List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type       : chr "MULTIPOLYGON"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ srs        : chr "PROJCS[\"NAD83 / Montana\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS 1980\",6378137,2"| __truncated__</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_nullable: logi TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ is_geom    : logi TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## default value of the read/write field 'returnGeomAs'</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="va">returnGeomAs</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "WKB"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 61</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## sequential read cursor</span></span></span>
<span class="r-in"><span><span class="va">feat</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">getNextFeature</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># a list of field names and their values, with class attribute `OGRFeature`</span></span></span>
<span class="r-in"><span><span class="va">feat</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OGR feature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $FID</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $event_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] WY4413411069519870807</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $incid_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] POLECAT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $incid_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] Wildfire</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $map_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10015934</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $burn_bnd_ac</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1093</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $burn_bnd_lat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 44.132</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $burn_bnd_lon</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -110.696</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ig_date</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1987-08-07</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ig_year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1987</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $geom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] WKB MULTIPOLYGON: raw 01 06 00 00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## set an attribute filter</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">setAttributeFilter</span><span class="op">(</span><span class="st">"ig_year = 2020"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">feat</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">getNextFeature</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">feat</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="GDALVector-class-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## NULL when no more features are available</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getNextFeature</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## reset reading to the start</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">resetReading</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getNextFeature</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OGR feature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $FID</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $event_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] WY4438911082120200822</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $incid_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] LONE STAR</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $incid_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] Wildfire</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $map_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10020495</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $burn_bnd_ac</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3348</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $burn_bnd_lat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 44.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $burn_bnd_lon</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -110.782</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ig_date</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2020-08-22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ig_year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $geom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] WKB MULTIPOLYGON: raw 01 06 00 00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## clear the attribute filter</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">setAttributeFilter</span><span class="op">(</span><span class="st">""</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 61</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## set a spatial filter</span></span></span>
<span class="r-in"><span><span class="co">## get the bounding box of the largest 1988 fire and use as spatial filter</span></span></span>
<span class="r-in"><span><span class="co">## first set a temporary attribute filter to do the lookup</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">setAttributeFilter</span><span class="op">(</span><span class="st">"ig_year = 1988 ORDER BY burn_bnd_ac DESC"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">getNextFeature</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OGR feature</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $FID</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $event_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] WY4470811082119880722</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $incid_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NORTH FORK</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $incid_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] Wildfire</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $map_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10014217</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $burn_bnd_ac</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 563527</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $burn_bnd_lat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 44.678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $burn_bnd_lon</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -110.716</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ig_date</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1988-07-22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ig_year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1988</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $geom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] WKB MULTIPOLYGON: raw 01 06 00 00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="g_wk2wk.html">g_wk2wk</a></span><span class="op">(</span><span class="va">feat</span><span class="op">$</span><span class="va">geom</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="bbox_from_wkt.html">bbox_from_wkt</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## set spatial filter on the full layer</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">setAttributeFilter</span><span class="op">(</span><span class="st">""</span><span class="op">)</span>  <span class="co"># clears</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">setSpatialFilterRect</span><span class="op">(</span><span class="va">bbox</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 40</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## fetch in chunks and return as data frame (class `OGRFeatureSet`)</span></span></span>
<span class="r-in"><span><span class="va">feat_set</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">fetch</span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">feat_set</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> OGR feature set</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   FID              event_id               incid_name        incid_type   map_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  38 MT4471311115120070627              MADISON ARM          Wildfire    16113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   7 WY4470811082119880722               NORTH FORK          Wildfire 10014217</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  32 MT4491211108020030820                 RATHBONE          Wildfire    13014</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  25 WY4433011103020000816 SPRUCE COMPLEX (PLATEAU)          Wildfire 10014141</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   6 WY4499211096519880625                      FAN Wildland Fire Use 10014215</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  40 MT4502711102920070720                      OWL          Wildfire    16428</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   burn_bnd_ac burn_bnd_lat burn_bnd_lon    ig_date ig_year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        3564       44.713     -111.151 2007-06-27    2007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      563527       44.678     -110.716 1988-07-22    1988</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        2701       44.912     -111.080 2003-08-20    2003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        2808       44.329     -111.027 2000-08-16    2000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       20422       44.994     -110.976 1988-06-25    1988</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6        2175       45.027     -111.029 2007-07-20    2007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    geom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 WKB MULTIPOLYGON: raw 01 06 00 00 ...</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">feat_set</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="GDALVector-class-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## the next chunk</span></span></span>
<span class="r-in"><span><span class="va">feat_set</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">fetch</span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">feat_set</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 20</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## no features remaining</span></span></span>
<span class="r-in"><span><span class="va">feat_set</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">fetch</span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">feat_set</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">feat_set</span><span class="op">)</span>  <span class="co"># 0-row data frame with columns typed</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Classes ‘OGRFeatureSet’ and 'data.frame':	0 obs. of  11 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ FID         :integer64  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ event_id    : chr </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ incid_name  : chr </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ incid_type  : chr </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ map_id      :integer64  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ burn_bnd_ac :integer64  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ burn_bnd_lat: chr </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ burn_bnd_lon: chr </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ig_date     : 'Date' num(0) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ig_year     : int </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ geom        : list()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "gis")=List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type         : chr "vector"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_column  : chr "geom"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_col_type: chr "MULTIPOLYGON"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_col_srs : chr "PROJCS[\"NAD83 / Montana\",GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS 1980\",6378137,2"| __truncated__</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_format  : chr "WKB"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## fetch all pending features</span></span></span>
<span class="r-in"><span><span class="va">feat_set</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">fetch</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>  <span class="co"># resets reading to the first feature</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">feat_set</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 40</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">feat_set</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="GDALVector-class-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">clearSpatialFilter</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 61</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">close</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## simple example for feature write methods showing use of various data types</span></span></span>
<span class="r-in"><span><span class="co">## create and write to a new layer in a GeoPackage data source</span></span></span>
<span class="r-in"><span><span class="va">dsn2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".gpkg"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## define a feature class</span></span></span>
<span class="r-in"><span><span class="va">defn</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_layer</a></span><span class="op">(</span><span class="st">"POINT"</span>, srs <span class="op">=</span> <span class="fu"><a href="epsg_to_wkt.html">epsg_to_wkt</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## add field definitions</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">unique_int</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_field</a></span><span class="op">(</span><span class="st">"OFTInteger"</span>, is_nullable <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                                 is_unique <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">bool_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_field</a></span><span class="op">(</span><span class="st">"OFTInteger"</span>, fld_subtype <span class="op">=</span> <span class="st">"OFSTBoolean"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">large_ints</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_field</a></span><span class="op">(</span><span class="st">"OFTInteger64"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">doubles</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_field</a></span><span class="op">(</span><span class="st">"OFTReal"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">strings</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_field</a></span><span class="op">(</span><span class="st">"OFTString"</span>, fld_width <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_field</a></span><span class="op">(</span><span class="st">"OFTDate"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">dt_modified</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_field</a></span><span class="op">(</span><span class="st">"OFTDateTime"</span>,</span></span>
<span class="r-in"><span>                                  default_value <span class="op">=</span> <span class="st">"CURRENT_TIMESTAMP"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">blobs</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_field</a></span><span class="op">(</span><span class="st">"OFTBinary"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="ogr_manage.html">ogr_ds_create</a></span><span class="op">(</span><span class="st">"GPKG"</span>, <span class="va">dsn2</span>, <span class="st">"test_layer"</span>, layer_defn <span class="op">=</span> <span class="va">defn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyr</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="va">GDALVector</span>, <span class="va">dsn2</span>, <span class="st">"test_layer"</span>, read_only <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># lyr$getLayerDefn() |&gt; str()</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## define a feature to write</span></span></span>
<span class="r-in"><span><span class="va">feat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## $FID is omitted since it is assigned when written (could also be NA)</span></span></span>
<span class="r-in"><span><span class="co">## $dt_modified is omitted since the datasource sets a default timestamp</span></span></span>
<span class="r-in"><span><span class="va">feat1</span><span class="op">$</span><span class="va">unique_int</span> <span class="op">&lt;-</span> <span class="fl">1001</span></span></span>
<span class="r-in"><span><span class="va">feat1</span><span class="op">$</span><span class="va">bool_data</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="co">## passing a string to as.integer64()</span></span></span>
<span class="r-in"><span><span class="co">## this value is too large to be represented exactly as R numeric (double)</span></span></span>
<span class="r-in"><span><span class="va">feat1</span><span class="op">$</span><span class="va">large_ints</span> <span class="op">&lt;-</span> <span class="fu">bit64</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bit64/man/as.integer64.character.html" class="external-link">as.integer64</a></span><span class="op">(</span><span class="st">"90071992547409910"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat1</span><span class="op">$</span><span class="va">doubles</span> <span class="op">&lt;-</span> <span class="fl">1.234</span></span></span>
<span class="r-in"><span><span class="va">feat1</span><span class="op">$</span><span class="va">strings</span> <span class="op">&lt;-</span> <span class="st">"A test string"</span></span></span>
<span class="r-in"><span><span class="va">feat1</span><span class="op">$</span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-01"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat1</span><span class="op">$</span><span class="va">blobs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">charToRaw</a></span><span class="op">(</span><span class="st">"A binary object"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat1</span><span class="op">$</span><span class="va">geom</span> <span class="op">&lt;-</span> <span class="st">"POINT (1 1)"</span>  <span class="co"># can be a WKT string or raw vector of WKB</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## create as a new feature in the layer</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">createFeature</span><span class="op">(</span><span class="va">feat1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## the assigned FID</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getLastWriteFID</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## this fails due to the unique constraint</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">createFeature</span><span class="op">(</span><span class="va">feat1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">feat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat2</span><span class="op">$</span><span class="va">unique_int</span> <span class="op">&lt;-</span> <span class="fl">1002</span></span></span>
<span class="r-in"><span><span class="va">feat2</span><span class="op">$</span><span class="va">bool_data</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="va">feat2</span><span class="op">$</span><span class="va">large_ints</span> <span class="op">&lt;-</span> <span class="fu">bit64</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bit64/man/as.integer64.character.html" class="external-link">as.integer64</a></span><span class="op">(</span><span class="st">"90071992547409920"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat2</span><span class="op">$</span><span class="va">doubles</span> <span class="op">&lt;-</span> <span class="fl">2.345</span></span></span>
<span class="r-in"><span><span class="va">feat2</span><span class="op">$</span><span class="va">strings</span> <span class="op">&lt;-</span> <span class="st">"A test string 2"</span></span></span>
<span class="r-in"><span><span class="va">feat2</span><span class="op">$</span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-01-02"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat2</span><span class="op">$</span><span class="va">blobs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rawConversion.html" class="external-link">charToRaw</a></span><span class="op">(</span><span class="st">"A binary object 2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat2</span><span class="op">$</span><span class="va">geom</span> <span class="op">&lt;-</span> <span class="st">"POINT (2 2)"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">createFeature</span><span class="op">(</span><span class="va">feat2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getLastWriteFID</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> integer64</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## close and re-open as a read-only layer</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">open</span><span class="op">(</span>read_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-in"><span><span class="va">feat_set</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">fetch</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>  <span class="co"># -1 for all features reading from start</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">feat_set</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Classes ‘OGRFeatureSet’ and 'data.frame':	2 obs. of  10 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ FID        :integer64 1 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ unique_int : int  1001 1002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ bool_data  : logi  TRUE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ large_ints :integer64 90071992547409910 90071992547409920 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ doubles    : num  1.23 2.35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ strings    : chr  "A test string" "A test string 2"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dates      : Date, format: "2024-01-01" "2024-01-02"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dt_modified: POSIXct, format: "2024-11-08 00:30:31" "2024-11-08 00:30:31"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ blobs      :List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : raw  41 20 62 69 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : raw  41 20 62 69 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ geom       :List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : raw  01 01 00 00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : raw  01 01 00 00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "gis")=List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type         : chr "vector"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_column  : chr "geom"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_col_type: chr "POINT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_col_srs : chr "GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AU"| __truncated__</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_format  : chr "WKB"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## edit an existing feature, e.g., feat &lt;- lyr$getFeature(2)</span></span></span>
<span class="r-in"><span><span class="co">## here we copy a row of the data frame returned by lyr$fetch() above</span></span></span>
<span class="r-in"><span><span class="va">feat</span> <span class="op">&lt;-</span> <span class="va">feat_set</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">feat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Classes ‘OGRFeatureSet’ and 'data.frame':	1 obs. of  10 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ FID        :integer64 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ unique_int : int 1002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ bool_data  : logi FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ large_ints :integer64 90071992547409920 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ doubles    : num 2.35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ strings    : chr "A test string 2"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dates      : Date, format: "2024-01-02"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dt_modified: POSIXct, format: "2024-11-08 00:30:31"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ blobs      :List of 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : raw  41 20 62 69 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ geom       :List of 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : raw  01 01 00 00 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "gis")=List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type         : chr "vector"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_column  : chr "geom"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_col_type: chr "POINT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_col_srs : chr "GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AU"| __truncated__</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_format  : chr "WKB"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>  <span class="co"># only to ensure a timestamp difference</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">feat</span><span class="op">$</span><span class="va">bool_data</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="va">feat</span><span class="op">$</span><span class="va">strings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">feat</span><span class="op">$</span><span class="va">strings</span>, <span class="st">"- edited"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat</span><span class="op">$</span><span class="va">dt_modified</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">feat</span><span class="op">$</span><span class="va">geom</span> <span class="op">&lt;-</span> <span class="st">"POINT (2.001 2.001)"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">open</span><span class="op">(</span>read_only <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## lyr$setFeature() re-writes the feature identified by the $FID element</span></span></span>
<span class="r-in"><span><span class="co">## N.B., all fields are re-written:</span></span></span>
<span class="r-in"><span><span class="co">##   any fields omitted from the input feature, or set to NA, will be</span></span></span>
<span class="r-in"><span><span class="co">##   re-written as OGR NULL</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">setFeature</span><span class="op">(</span><span class="va">feat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">open</span><span class="op">(</span>read_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">getFeatureCount</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="va">returnGeomAs</span> <span class="op">&lt;-</span> <span class="st">"WKT"</span></span></span>
<span class="r-in"><span><span class="va">feat_set</span> <span class="op">&lt;-</span> <span class="va">lyr</span><span class="op">$</span><span class="fu">fetch</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">feat_set</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Classes ‘OGRFeatureSet’ and 'data.frame':	2 obs. of  10 variables:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ FID        :integer64 1 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ unique_int : int  1001 1002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ bool_data  : logi  TRUE TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ large_ints :integer64 90071992547409910 90071992547409920 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ doubles    : num  1.23 2.35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ strings    : chr  "A test string" "A test string 2 - edited"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dates      : Date, format: "2024-01-01" "2024-01-02"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ dt_modified: POSIXct, format: "2024-11-08 00:30:31" "2024-11-08 00:30:32"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ blobs      :List of 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : raw  41 20 62 69 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ : raw  41 20 62 69 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ geom       : chr  "POINT (1 1)" "POINT (2.001 2.001)"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "gis")=List of 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ type         : chr "vector"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_column  : chr "geom"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_col_type: chr "POINT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_col_srs : chr "GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AU"| __truncated__</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ..$ geom_format  : chr "WKT"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyr</span><span class="op">$</span><span class="fu">close</span><span class="op">(</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/ctoney" class="external-link">Chris Toney</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

