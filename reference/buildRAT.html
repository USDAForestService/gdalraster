<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="buildRAT() reads all pixels of an input raster to obtain the set of
unique values and their counts. The result is returned as a data frame
suitable for use with the class method GDALRaster$setDefaultRAT(). The
returned data frame might be further modified before setting as a Raster
Attribute Table in a dataset, for example, by adding columns containing
class names, color values, or other information (see Details).
An optional input data frame containing such attributes may be given, in
which case buildRAT() will attempt to join the additional columns and
automatically assign the appropriate metadata on the output data frame
(i.e., assign R attributes on the data frame and its columns that define
usage in a GDAL Raster Attribute Table)."><title>Build a GDAL Raster Attribute Table with VALUE, COUNT — buildRAT • gdalraster</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Build a GDAL Raster Attribute Table with VALUE, COUNT — buildRAT"><meta property="og:description" content="buildRAT() reads all pixels of an input raster to obtain the set of
unique values and their counts. The result is returned as a data frame
suitable for use with the class method GDALRaster$setDefaultRAT(). The
returned data frame might be further modified before setting as a Raster
Attribute Table in a dataset, for example, by adding columns containing
class names, color values, or other information (see Details).
An optional input data frame containing such attributes may be given, in
which case buildRAT() will attempt to join the additional columns and
automatically assign the appropriate metadata on the output data frame
(i.e., assign R attributes on the data frame and its columns that define
usage in a GDAL Raster Attribute Table)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gdalraster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.10.9010</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/gdal-block-cache.html">GDAL Block Cache</a>
    <a class="dropdown-item" href="../articles/gdalvector-draft.html">Draft Bindings to the GDAL/OGR Vector API</a>
    <a class="dropdown-item" href="../articles/raster-display.html">Raster Display</a>
    <a class="dropdown-item" href="../articles/gdal-config-quick-ref.html">GDAL Config Quick Reference</a>
    <a class="dropdown-item" href="../articles/raster-api-tutorial.html">Raster API Tutorial</a>
    <a class="dropdown-item" href="../articles/raster-attribute-tables.html">Raster Attribute Tables</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USDAForestService/gdalraster/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Build a GDAL Raster Attribute Table with VALUE, COUNT</h1>
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/gdalraster/blob/HEAD/R/gdal_rat.R" class="external-link"><code>R/gdal_rat.R</code></a></small>
      <div class="d-none name"><code>buildRAT.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>buildRAT()</code> reads all pixels of an input raster to obtain the set of
unique values and their counts. The result is returned as a data frame
suitable for use with the class method <code>GDALRaster$setDefaultRAT()</code>. The
returned data frame might be further modified before setting as a Raster
Attribute Table in a dataset, for example, by adding columns containing
class names, color values, or other information (see Details).
An optional input data frame containing such attributes may be given, in
which case <code>buildRAT()</code> will attempt to join the additional columns and
automatically assign the appropriate metadata on the output data frame
(i.e., assign R attributes on the data frame and its columns that define
usage in a GDAL Raster Attribute Table).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">buildRAT</span><span class="op">(</span></span>
<span>  <span class="va">raster</span>,</span>
<span>  band <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  col_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VALUE"</span>, <span class="st">"COUNT"</span><span class="op">)</span>,</span>
<span>  table_type <span class="op">=</span> <span class="st">"athematic"</span>,</span>
<span>  na_value <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  join_df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>raster</dt>
<dd><p>Either a <code>GDALRaster</code> object, or a character string containing
the file name of a raster dataset to open.</p></dd>


<dt>band</dt>
<dd><p>Integer scalar, band number to read (default <code>1L</code>).</p></dd>


<dt>col_names</dt>
<dd><p>Character vector of length two containing names to use for
column 1 (pixel values) and column 2 (pixel counts) in the output data
frame (defaults are <code>c("VALUE", "COUNT")</code>).</p></dd>


<dt>table_type</dt>
<dd><p>Character string describing the type of the attribute
table. One of either <code>"thematic"</code>, or <code>"athematic"</code> for continuous data
(the default).</p></dd>


<dt>na_value</dt>
<dd><p>Numeric scalar. If the set of unique pixel values has an
<code>NA</code>, it will be recoded to <code>na_value</code> in the returned data frame.
If <code>NULL</code> (the default), <code>NA</code> will not be recoded.</p></dd>


<dt>join_df</dt>
<dd><p>Optional data frame for joining additional attributes. Must
have a column of unique values with the same name as <code>col_names[1]</code>
(<code>"VALUE"</code> by default).</p></dd>


<dt>quiet</dt>
<dd><p>Logical scalar. If <code>TRUE``, a progress bar will not be displayed. Defaults to </code>FALSE``.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame with at least two columns containing the set of unique
pixel values and their counts. These columns have attribute <code>"GFU"</code> set to
<code>"MinMax"</code> for the values, and <code>"PixelCount"</code> for the counts. If <code>join_df</code> is
given, the returned data frame will have additional columns that result from
<code><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge()</a></code>. The <code>"GFU"</code> attribute of the additional columns will be assigned
automatically based on the column names (<em>case-insensitive</em> matching, see
Details). The returned data frame has attribute <code>"GDALRATTableType"</code> set to
<code>table_type</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A GDAL Raster Attribute Table (or RAT) provides attribute information about
pixel values. Raster attribute tables can be used to represent histograms,
color tables, and classification information. Each row in the table applies
to either a single pixel value or a range of values, and might have
attributes such as the histogram count for that value (or range), the color
that pixels of that value (or range) should be displayed, names of classes,
or various other information.</p>
<p>Each column in a raster attribute table has a name, a type (integer,
double, or string), and a <code>GDALRATFieldUsage</code>. The usage
distinguishes columns with particular understood purposes (such as color,
histogram count, class name), and columns that have other purposes not
understood by the library (long labels, ancillary attributes, etc).</p>
<p>In the general case, each row has a field indicating the minimum pixel
value falling into that category, and a field indicating the maximum pixel
value. In the GDAL API, these are indicated with usage values of <code>GFU_Min</code>
and <code>GFU_Max</code>. In the common case where each row is a discrete pixel value,
a single column with usage <code>GFU_MinMax</code> would be used instead.
In R, the table is represented as a data frame with column attribute <code>"GFU"</code>
containing the field usage as a string, e.g., <code>"Max"</code>, <code>"Min"</code> or <code>"MinMax"</code>
(case-sensitive).
The full set of possible field usage descriptors is:</p><table class="table table"><tr><td>GFU attr</td><td>GDAL enum</td><td>Description</td></tr><tr><td><code>"Generic"</code></td><td><code>GFU_Generic</code></td><td>General purpose field</td></tr><tr><td><code>"PixelCount"</code></td><td><code>GFU_PixelCount</code></td><td>Histogram pixel count</td></tr><tr><td><code>"Name"</code></td><td><code>GFU_Name</code></td><td>Class name</td></tr><tr><td><code>"Min"</code></td><td><code>GFU_Min</code></td><td>Class range minimum</td></tr><tr><td><code>"Max"</code></td><td><code>GFU_Max</code></td><td>Class range maximum</td></tr><tr><td><code>"MinMax"</code></td><td><code>GFU_MinMax</code></td><td>Class value (min=max)</td></tr><tr><td><code>"Red"</code></td><td><code>GFU_Red</code></td><td>Red class color (0-255)</td></tr><tr><td><code>"Green"</code></td><td><code>GFU_Green</code></td><td>Green class color (0-255)</td></tr><tr><td><code>"Blue"</code></td><td><code>GFU_Blue</code></td><td>Blue class color (0-255)</td></tr><tr><td><code>"Alpha"</code></td><td><code>GFU_Alpha</code></td><td>Alpha transparency (0-255)</td></tr><tr><td><code>"RedMin"</code></td><td><code>GFU_RedMin</code></td><td>Color range red minimum</td></tr><tr><td><code>"GreenMin"</code></td><td><code>GFU_GreenMin</code></td><td>Color range green minimum</td></tr><tr><td><code>"BlueMin"</code></td><td><code>GFU_BlueMin</code></td><td>Color range blue minimum</td></tr><tr><td><code>"AlphaMin"</code></td><td><code>GFU_AlphaMin</code></td><td>Color range alpha minimum</td></tr><tr><td><code>"RedMax"</code></td><td><code>GFU_RedMax</code></td><td>Color range red maximum</td></tr><tr><td><code>"GreenMax"</code></td><td><code>GFU_GreenMax</code></td><td>Color range green maximum</td></tr><tr><td><code>"BlueMax"</code></td><td><code>GFU_BlueMax</code></td><td>Color range blue maximum</td></tr><tr><td><code>"AlphaMax"</code></td><td><code>GFU_AlphaMax</code></td><td>Color range alpha maximum</td></tr></table><p><code>buildRAT()</code> assigns GFU <code>"MinMax"</code> on the column of pixel values (named
<code>"VALUE"</code> by default) and GFU <code>"PixelCount"</code> on the column of counts (named
<code>"COUNT"</code> by default).
If <code>join_df</code> is given, the additional columns that result from joining will
have GFU assigned automatically based on the column names (<em>ignoring case</em>).
First, the additional column names are checked for containing
the string <code>"name"</code> (e.g., <code>"classname"</code>, <code>"TypeName"</code>, <code>"EVT_NAME"</code>, etc).
The first matching column (if any) will be assigned a GFU of <code>"Name"</code>
(=<code>GFU_Name</code>, the field usage descriptor for class names). Next, columns
named <code>"R"</code> or <code>"Red"</code> will be assigned GFU <code>"Red"</code>, columns named <code>"G"</code> or
<code>"Green"</code> will be assigned GFU <code>"Green"</code>, columns named <code>"B"</code> or <code>"Blue"</code>
will be assigned GFU <code>"Blue"</code>, and columns named <code>"A"</code> or <code>"Alpha"</code> will be
assigned GFU <code>"Alpha"</code>. Finally, any remaining columns that have not been
assigned a GFU will be assigned <code>"Generic"</code>.</p>
<p>In a variation of RAT, all the categories are of equal size and regularly
spaced, and the categorization can be determined by knowing the value at
which the categories start and the size of a category. This is called
"Linear Binning" and the information is kept specially on the raster
attribute table as a whole. In R, a RAT that uses linear binning would
have the following attributes set on the data frame:
attribute <code>"Row0Min"</code> = the numeric lower bound (pixel value) of the first
category, and attribute <code>"BinSize"</code> = the numeric width of each category (in
pixel value units). <code>buildRAT()</code> does not create tables with linear binning,
but one could be created manually based on the specifications above, and
applied to a raster with the class method <code>GDALRaster$setDefaultRAT()</code>.</p>
<p>A raster attribute table is thematic or athematic (continuous). In R, this
is defined by an attribute on the data frame named <code>"GDALRATTableType"</code> with
value of either <code>"thematic"</code> or <code>"athematic"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The full raster will be scanned.</p>
<p>If <code>na_value</code> is not specified, then an <code>NA</code> pixel value (if present)
will not be recoded in the output data frame. This may have implications
if joining to other data (<code>NA</code> will not match), or when using the returned
data frame to set a default RAT on a dataset (<code>NA</code> will be interpreted
as the value that R uses internally to represent it for the type, e.g.,
-2147483648 for <code>NA_integer_</code>). In some cases, removing the row in the output
data frame with value <code>NA</code>, rather than recoding, may be desirable (i.e., by
removing manually or by side effect of joining via <code><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge()</a></code>, for example).
Users should consider what is appropriate for a particular case.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="GDALRaster-class.html">GDALRaster$getDefaultRAT()</a></code>,
<code><a href="GDALRaster-class.html">GDALRaster$setDefaultRAT()</a></code>,
<code><a href="displayRAT.html">displayRAT()</a></code></p>
<p><code><a href="../articles/raster-attribute-tables.html">vignette("raster-attribute-tables")</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">evt_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/storml_evt.tif"</span>, package<span class="op">=</span><span class="st">"gdalraster"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># make a copy to modify</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/"</span>, <span class="st">"storml_evt_tmp.tif"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="va">evt_file</span>,  <span class="va">f</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="va">GDALRaster</span>, <span class="va">f</span>, read_only<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ds</span><span class="op">$</span><span class="fu">getDefaultRAT</span><span class="op">(</span>band<span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="co"># NULL</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get the full attribute table for LANDFIRE EVT from the CSV file</span></span></span>
<span class="r-in"><span><span class="va">evt_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/LF20_EVT_220.csv"</span>, package<span class="op">=</span><span class="st">"gdalraster"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">evt_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">evt_csv</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">evt_df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 860</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">evt_df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   VALUE                                            EVT_NAME EVT_LF EVT_PHYS   R</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -9999                                         Fill-NoData   &lt;NA&gt;     &lt;NA&gt; 255</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  7008                          North Pacific Oak Woodland   Tree Hardwood 203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  7009 Northwestern Great Plains Aspen Forest and Parkland   Tree Hardwood 192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  7010       Northern Rocky Mountain Western Larch Savanna   Tree  Conifer 180</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  7011            Rocky Mountain Aspen Forest and Woodland   Tree Hardwood 192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  7012       Rocky Mountain Bigtooth Maple Ravine Woodland   Tree Hardwood 171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     G   B      RED GREEN     BLUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 255 255 1.000000     1 1.000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 255 171 0.796078     1 0.670588</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 255 138 0.752941     1 0.541176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 255 148 0.705882     1 0.580392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 255 138 0.752941     1 0.541176</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 255 138 0.670588     1 0.541176</span>
<span class="r-in"><span><span class="va">evt_df</span> <span class="op">&lt;-</span> <span class="va">evt_df</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">buildRAT</span><span class="op">(</span><span class="va">ds</span>,</span></span>
<span class="r-in"><span>                table_type <span class="op">=</span> <span class="st">"thematic"</span>,</span></span>
<span class="r-in"><span>                na_value <span class="op">=</span> <span class="op">-</span><span class="fl">9999</span>,</span></span>
<span class="r-in"><span>                join_df <span class="op">=</span> <span class="va">evt_df</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> scanning raster...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0...10...20...30...40...50...60...70...80...90...100 - done.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 24</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   VALUE COUNT                                                          EVT_NAME</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -9999   876                                                       Fill-NoData</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  7011    28                          Rocky Mountain Aspen Forest and Woodland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  7046  4564           Northern Rocky Mountain Subalpine Woodland and Parkland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  7050   570                              Rocky Mountain Lodgepole Pine Forest</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  7055   889 Rocky Mountain Subalpine Dry-Mesic Spruce-Fir Forest and Woodland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  7056   304 Rocky Mountain Subalpine Mesic-Wet Spruce-Fir Forest and Woodland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   EVT_LF EVT_PHYS   R   G   B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   &lt;NA&gt;     &lt;NA&gt; 255 255 255</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   Tree Hardwood 192 255 138</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Tree  Conifer 191 255 233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Tree  Conifer 163 240 219</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Tree  Conifer 236 252 204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   Tree  Conifer 236 252 204</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># attributes on the data frame and its columns define usage in a GDAL RAT</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $names</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "VALUE"    "COUNT"    "EVT_NAME" "EVT_LF"   "EVT_PHYS" "R"        "G"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [8] "B"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $row.names</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $class</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "data.frame"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GDALRATTableType</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "thematic"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">VALUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GFU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "MinMax"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">COUNT</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GFU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "PixelCount"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">EVT_NAME</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GFU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Name"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">EVT_LF</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GFU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Generic"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">EVT_PHYS</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GFU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Generic"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">R</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GFU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Red"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">G</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GFU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Green"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">$</span><span class="va">B</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $GFU</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Blue"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ds</span><span class="op">$</span><span class="fu">setDefaultRAT</span><span class="op">(</span>band<span class="op">=</span><span class="fl">1</span>, <span class="va">tbl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="va">ds</span><span class="op">$</span><span class="fu">flushCache</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tbl2</span> <span class="op">&lt;-</span> <span class="va">ds</span><span class="op">$</span><span class="fu">getDefaultRAT</span><span class="op">(</span>band<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">tbl2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 24</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tbl2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   VALUE COUNT                                                          EVT_NAME</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 -9999   876                                                       Fill-NoData</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  7011    28                          Rocky Mountain Aspen Forest and Woodland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  7046  4564           Northern Rocky Mountain Subalpine Woodland and Parkland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  7050   570                              Rocky Mountain Lodgepole Pine Forest</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  7055   889 Rocky Mountain Subalpine Dry-Mesic Spruce-Fir Forest and Woodland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  7056   304 Rocky Mountain Subalpine Mesic-Wet Spruce-Fir Forest and Woodland</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   EVT_LF EVT_PHYS   R   G   B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     NA       NA 255 255 255</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   Tree Hardwood 192 255 138</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Tree  Conifer 191 255 233</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Tree  Conifer 163 240 219</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Tree  Conifer 236 252 204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   Tree  Conifer 236 252 204</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ds</span><span class="op">$</span><span class="fu">close</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="deleteDataset.html">deleteDataset</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Display</span></span></span>
<span class="r-in"><span><span class="va">evt_gt</span> <span class="op">&lt;-</span> <span class="fu"><a href="displayRAT.html">displayRAT</a></span><span class="op">(</span><span class="va">tbl2</span>, title <span class="op">=</span> <span class="st">"Storm Lake EVT Raster Attribute Table"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">evt_gt</span><span class="op">)</span>  <span class="co"># an object of class "gt_tbl" from package gt</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "gt_tbl" "list"  </span>
<span class="r-in"><span><span class="co"># To show the table:</span></span></span>
<span class="r-in"><span><span class="co"># evt_gt</span></span></span>
<span class="r-in"><span><span class="co"># or simply call `displayRAT()` as above but without assignment</span></span></span>
<span class="r-in"><span><span class="co"># `vignette("raster-attribute-tables")` has example output</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://github.com/ctoney" class="external-link">Chris Toney</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

