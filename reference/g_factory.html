<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create WKB/WKT geometries from vertices, and add sub-geometries — g_factory • gdalraster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create WKB/WKT geometries from vertices, and add sub-geometries — g_factory"><meta name="description" content="These functions create WKB/WKT geometries from input vertices, and build
container geometry types from sub-geometries."><meta property="og:description" content="These functions create WKB/WKT geometries from input vertices, and build
container geometry types from sub-geometries."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gdalraster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.12.0.9240</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/gdal-block-cache.html">GDAL Block Cache</a></li>
    <li><a class="dropdown-item" href="../articles/gdal-config-quick-ref.html">GDAL Config Quick Reference</a></li>
    <li><a class="dropdown-item" href="../articles/gdalvector-draft.html">Draft Bindings to the GDAL/OGR Vector API</a></li>
    <li><a class="dropdown-item" href="../articles/raster-api-tutorial.html">Raster API Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/raster-attribute-tables.html">Raster Attribute Tables</a></li>
    <li><a class="dropdown-item" href="../articles/raster-display.html">Raster Display</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USDAForestService/gdalraster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create WKB/WKT geometries from vertices, and add sub-geometries</h1>
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/gdalraster/blob/main/R/geom.R" class="external-link"><code>R/geom.R</code></a></small>
      <div class="d-none name"><code>g_factory.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions create WKB/WKT geometries from input vertices, and build
container geometry types from sub-geometries.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">g_create</span><span class="op">(</span></span>
<span>  <span class="va">geom_type</span>,</span>
<span>  pts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  as_wkb <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  as_iso <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  byte_order <span class="op">=</span> <span class="st">"LSB"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">g_add_geom</span><span class="op">(</span></span>
<span>  <span class="va">sub_geom</span>,</span>
<span>  <span class="va">container</span>,</span>
<span>  as_wkb <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  as_iso <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  byte_order <span class="op">=</span> <span class="st">"LSB"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-geom-type">geom_type<a class="anchor" aria-label="anchor" href="#arg-geom-type"></a></dt>
<dd><p>Character string (case-insensitive), one of <code>"POINT"</code>,
<code>"MULTIPOINT"</code>, <code>"LINESTRING"</code>, <code>"POLYGON"</code> (see Note) or
<code>"GEOMETRYCOLLECTION"</code>.</p></dd>


<dt id="arg-pts">pts<a class="anchor" aria-label="anchor" href="#arg-pts"></a></dt>
<dd><p>Numeric matrix of points (x, y, z, m), or <code>NULL</code> to create an
empty geometry. The points can be given as (x, y), (x, y, z) or
(x, y, z, m), so the input must have two, three or four columns.
Data frame input will be coerced to numeric matrix. Rings for polygon
geometries should be closed.</p></dd>


<dt id="arg-as-wkb">as_wkb<a class="anchor" aria-label="anchor" href="#arg-as-wkb"></a></dt>
<dd><p>Logical, <code>TRUE</code> to return the output geometry in WKB
format (the default), or <code>FALSE</code> to return a WKT string.</p></dd>


<dt id="arg-as-iso">as_iso<a class="anchor" aria-label="anchor" href="#arg-as-iso"></a></dt>
<dd><p>Logical, <code>TRUE</code> to export as ISO WKB/WKT (ISO 13249
SQL/MM Part 3), or <code>FALSE</code> (the default) to export as "Extended WKB/WKT".</p></dd>


<dt id="arg-byte-order">byte_order<a class="anchor" aria-label="anchor" href="#arg-byte-order"></a></dt>
<dd><p>Character string specifying the byte order when output is
WKB. One of <code>"LSB"</code> (the default) or <code>"MSB"</code> (uncommon).</p></dd>


<dt id="arg-sub-geom">sub_geom<a class="anchor" aria-label="anchor" href="#arg-sub-geom"></a></dt>
<dd><p>Either a raw vector of WKB or a character string of WKT.</p></dd>


<dt id="arg-container">container<a class="anchor" aria-label="anchor" href="#arg-container"></a></dt>
<dd><p>Either a raw vector of WKB or a character string of WKT for
a container geometry type.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A geometry as WKB raw vector by default, or a WKT string if
<code>as_wkb = FALSE</code>. In the case of multiple input points for creating Point
geometry type, a list of WKB raw vectors or character vector of WKT strings
will be returned.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>These functions use the GEOS library via GDAL headers.</p>
<p><code>g_create()</code> creates a geometry object from the given point(s) and returns
a raw vector of WKB (the default) or a character string of WKT. Currently
supports creating Point, MultiPoint, LineString, Polygon, and
GeomteryCollection.
If multiple input points are given for creating Point type, then multiple
geometries will be returned as a list of WKB raw vectors, or character
vector of WKT strings (if <code>as_wkb = FALSE</code>). Otherwise, a single geometry
is created from the input points. Only an empty GeometryCollection can be
created with this function, for subsequent use with <code>g_add_geom()</code>.</p>
<p><code>g_add_geom()</code> adds a geometry to a geometry container, e.g.,
Polygon to Polygon (to add an interior ring), Point to MultiPoint,
LineString to MultiLineString, Polygon to MultiPolygon, or mixed
geometry types to a GeometryCollection. Returns a new geometry, i.e,
the container geometry is not modified.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>A POLYGON can be created for a single ring which will be the
exterior ring. Additional POLYGONs can be created and added to an
existing POLYGON with <code>g_add_geom()</code>. These will become interior rings.
Alternatively, an empty polygon can be created with <code>g_create("POLYGON")</code>,
followed by creation and addition of POLYGONs as subgeometries. In that
case, the first added POLYGON will be the exterior ring. The next ones will
be the interior rings.</p>
<p>Only an empty GeometryCollection can be created with <code>g_create()</code>, which
can then be used as a container with <code>g_add_geom()</code>. If given, input points
will be ignored by <code>g_create()</code> if <code>geom_type = "GEOMETRYCOLLECTION"</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># raw vector of WKB by default</span></span></span>
<span class="r-in"><span><span class="fu">g_create</span><span class="op">(</span><span class="st">"POINT"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 01 01 00 00 00 00 00 00 00 00 00 f0 3f 00 00 00 00 00 00 00 40</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># as WKT</span></span></span>
<span class="r-in"><span><span class="fu">g_create</span><span class="op">(</span><span class="st">"POINT"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, as_wkb <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "POINT (1 2)"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># or convert in either direction</span></span></span>
<span class="r-in"><span><span class="fu">g_create</span><span class="op">(</span><span class="st">"POINT"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="g_wk2wk.html">g_wk2wk</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "POINT (1 2)"</span>
<span class="r-in"><span><span class="fu">g_create</span><span class="op">(</span><span class="st">"POINT"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, as_wkb <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="g_wk2wk.html">g_wk2wk</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 01 01 00 00 00 00 00 00 00 00 00 f0 3f 00 00 00 00 00 00 00 40</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create multipoint from a matrix of xyz points</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">9</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="fu">g_create</span><span class="op">(</span><span class="st">"MULTIPOINT"</span>, <span class="va">pts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="g_wk2wk.html">g_wk2wk</a></span><span class="op">(</span><span class="va">mp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "MULTIPOINT (9 1 0,1 9 10)"</span>
<span class="r-in"><span><span class="fu"><a href="g_wk2wk.html">g_wk2wk</a></span><span class="op">(</span><span class="va">mp</span>, as_iso <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "MULTIPOINT Z ((9 1 0),(1 9 10))"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create an empty container and add subgeometries</span></span></span>
<span class="r-in"><span><span class="va">mp2</span> <span class="op">&lt;-</span> <span class="fu">g_create</span><span class="op">(</span><span class="st">"MULTIPOINT"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mp2</span> <span class="op">&lt;-</span> <span class="fu">g_create</span><span class="op">(</span><span class="st">"POINT"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">11</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">g_add_geom</span><span class="op">(</span><span class="va">mp2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mp2</span> <span class="op">&lt;-</span> <span class="fu">g_create</span><span class="op">(</span><span class="st">"POINT"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">g_add_geom</span><span class="op">(</span><span class="va">mp2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="g_wk2wk.html">g_wk2wk</a></span><span class="op">(</span><span class="va">mp2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "MULTIPOINT (11 2,12 3)"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># plot WKT strings or a list of WKB raw vectors with wk::wk_plot()</span></span></span>
<span class="r-in"><span><span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">pts</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">g_create</span><span class="op">(</span><span class="st">"POLYGON"</span>, <span class="va">m</span>, as_wkb <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">wk</span><span class="fu">::</span><span class="fu"><a href="https://paleolimbot.github.io/wk/reference/wkt.html" class="external-link">wkt</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">wk</span><span class="fu">::</span><span class="fu"><a href="https://paleolimbot.github.io/wk/reference/wk_plot.html" class="external-link">wk_plot</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="g_factory-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/ctoney" class="external-link">Chris Toney</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

