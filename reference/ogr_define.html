<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>OGR feature class definition for vector data — ogr_define • gdalraster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="OGR feature class definition for vector data — ogr_define"><meta name="description" content="This topic contains documentation and helper functions for defining an
OGR feature class.
ogr_def_field() creates an attribute field definition, a list
containing the field data type and potentially other optional field
properties.
ogr_def_geom_field() similarly creates a geometry field definition.
A list containing zero or more attribute field definitions, along with one
or more geometry field definitions, comprise an OGR feature class definition
(a.k.a. layer definition). ogr_def_layer() initializes such a list with a
geometry field. Attribute fields can be added to a feature class definition
with calls to ogr_def_field() as in the examples."><meta property="og:description" content="This topic contains documentation and helper functions for defining an
OGR feature class.
ogr_def_field() creates an attribute field definition, a list
containing the field data type and potentially other optional field
properties.
ogr_def_geom_field() similarly creates a geometry field definition.
A list containing zero or more attribute field definitions, along with one
or more geometry field definitions, comprise an OGR feature class definition
(a.k.a. layer definition). ogr_def_layer() initializes such a list with a
geometry field. Attribute fields can be added to a feature class definition
with calls to ogr_def_field() as in the examples."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gdalraster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.11.1.9481</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/gdal-block-cache.html">GDAL Block Cache</a></li>
    <li><a class="dropdown-item" href="../articles/gdal-config-quick-ref.html">GDAL Config Quick Reference</a></li>
    <li><a class="dropdown-item" href="../articles/gdalvector-draft.html">Draft Bindings to the GDAL/OGR Vector API</a></li>
    <li><a class="dropdown-item" href="../articles/raster-api-tutorial.html">Raster API Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/raster-attribute-tables.html">Raster Attribute Tables</a></li>
    <li><a class="dropdown-item" href="../articles/raster-display.html">Raster Display</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USDAForestService/gdalraster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>OGR feature class definition for vector data</h1>
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/gdalraster/blob/main/R/ogr_define.R" class="external-link"><code>R/ogr_define.R</code></a></small>
      <div class="d-none name"><code>ogr_define.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This topic contains documentation and helper functions for defining an
OGR feature class.
<code>ogr_def_field()</code> creates an attribute field definition, a list
containing the field data type and potentially other optional field
properties.
<code>ogr_def_geom_field()</code> similarly creates a geometry field definition.
A list containing zero or more attribute field definitions, along with one
or more geometry field definitions, comprise an OGR feature class definition
(a.k.a. layer definition). <code>ogr_def_layer()</code> initializes such a list with a
geometry field. Attribute fields can be added to a feature class definition
with calls to <code>ogr_def_field()</code> as in the examples.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ogr_def_field</span><span class="op">(</span></span>
<span>  <span class="va">fld_type</span>,</span>
<span>  fld_subtype <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fld_width <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fld_precision <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  is_nullable <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  is_unique <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  default_value <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_def_geom_field</span><span class="op">(</span><span class="va">geom_type</span>, srs <span class="op">=</span> <span class="cn">NULL</span>, is_nullable <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_def_layer</span><span class="op">(</span><span class="va">geom_type</span>, geom_fld_name <span class="op">=</span> <span class="st">"geometry"</span>, srs <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-fld-type">fld_type<a class="anchor" aria-label="anchor" href="#arg-fld-type"></a></dt>
<dd><p>Character string containing the name of a field data type
(e.g., <code>OFTInteger</code>, <code>OFTReal</code>, <code>OFTString</code>).</p></dd>


<dt id="arg-fld-subtype">fld_subtype<a class="anchor" aria-label="anchor" href="#arg-fld-subtype"></a></dt>
<dd><p>Character string containing the name of a field subtype.
One of  <code>OFSTNone</code> (the default), <code>OFSTBoolean</code>, <code>OFSTInt16</code>, <code>OFSTFloat32</code>,
<code>OFSTJSON</code>, <code>OFSTUUID</code>.</p></dd>


<dt id="arg-fld-width">fld_width<a class="anchor" aria-label="anchor" href="#arg-fld-width"></a></dt>
<dd><p>Optional integer scalar specifying max number of characters.</p></dd>


<dt id="arg-fld-precision">fld_precision<a class="anchor" aria-label="anchor" href="#arg-fld-precision"></a></dt>
<dd><p>Optional integer scalar specifying number of digits
after the decimal point.</p></dd>


<dt id="arg-is-nullable">is_nullable<a class="anchor" aria-label="anchor" href="#arg-is-nullable"></a></dt>
<dd><p>Optional NOT NULL field constraint (logical scalar).
Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-is-unique">is_unique<a class="anchor" aria-label="anchor" href="#arg-is-unique"></a></dt>
<dd><p>Optional UNIQUE constraint on the field (logical scalar).
Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-default-value">default_value<a class="anchor" aria-label="anchor" href="#arg-default-value"></a></dt>
<dd><p>Optional default value for the field as a character
string.</p></dd>


<dt id="arg-geom-type">geom_type<a class="anchor" aria-label="anchor" href="#arg-geom-type"></a></dt>
<dd><p>Character string specifying a geometry type (see Details).</p></dd>


<dt id="arg-srs">srs<a class="anchor" aria-label="anchor" href="#arg-srs"></a></dt>
<dd><p>Character string containing a spatial reference system definition
as OGC WKT or other well-known format (e.g., the input formats usable with
<code><a href="srs_to_wkt.html">srs_to_wkt()</a></code>).</p></dd>


<dt id="arg-geom-fld-name">geom_fld_name<a class="anchor" aria-label="anchor" href="#arg-geom-fld-name"></a></dt>
<dd><p>Character string specifying a geometry field name
Defaults to <code>"geometry"</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>All features in an OGR Layer share a common schema (feature class), modeled
in GDAL as OGR Feature Definition. The feature class definition includes the
set of attribute fields and their data types and the geometry field(s).
In R, a feature class definition is represented as a list, having as names
the attribute/geometry field names, with each list element holding a field
definition.</p>
<p>An attribute field definition is a list with named elements:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">$</span>type       <span class="sc">:</span> OGR Field <span class="fu">Type</span> (<span class="st">"OFTReal"</span>, <span class="st">"OFTString"</span> etc.)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">$</span>subtype    <span class="sc">:</span> <span class="fu">optional</span> (<span class="st">"OFSTBoolean"</span>, ...)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">$</span>width      <span class="sc">:</span> optional max number of characters</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="sc">$</span>precision  <span class="sc">:</span> optional number of digits after the decimal point</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="sc">$</span>is_nullable<span class="sc">:</span> optional NOT <span class="cn">NULL</span> <span class="fu">constraint</span> (logical scalar)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="sc">$</span>is_unique  <span class="sc">:</span> optional UNIQUE <span class="fu">constraint</span> (logical scalar)</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="sc">$</span>default    <span class="sc">:</span> optional default value as character string</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="sc">$</span>is_geom    <span class="sc">:</span> <span class="cn">FALSE</span> (the default) <span class="cf">for</span> attribute fields</span></code></pre><p></p></div>
<p>An OGR field type is specified as a character string with possible values:
<code>OFTInteger</code>, <code>OFTIntegerList</code>, <code>OFTReal</code>, <code>OFTRealList</code>, <code>OFTString</code>,
<code>OFTStringList</code>, <code>OFTBinary</code>,  <code>OFTDate</code>, <code>OFTTime</code>, <code>OFTDateTime</code>,
<code>OFTInteger64</code>, <code>OFTInteger64List</code>.</p>
<p>An optional field subtype is specified as a character string with possible
values:
<code>OFSTNone</code>, <code>OFSTBoolean</code>, <code>OFSTInt16</code>, <code>OFSTFloat32</code>, <code>OFSTJSON</code>,
<code>OFSTUUID</code>.</p>
<p>By default, fields are nullable, have no unique constraint, and are not
ignored (i.e., not omitted when fetching features). Not-null and unique
constraints are not supported by all format drivers.</p>
<p>A default field value is taken into account by format drivers (generally
those with a SQL interface) that support it at field creation time.
If given in the field definition, <code>$default</code> must be a character string.
The accepted values are <code>"NULL"</code>, a numeric value (e.g., <code>"0"</code>), a literal
value enclosed between single quote characters (e.g., <code>"'a default value'"</code>,
with any inner single quote characters escaped by repetition of the single
quote character), <code>"CURRENT_TIMESTAMP"</code>, <code>"CURRENT_TIME"</code>, <code>"CURRENT_DATE"</code>
or a driver-specific expression (that might be ignored by other drivers).
For a datetime literal value, format should be
<code>"'YYYY/MM/DD HH:MM:SS[.sss]'"</code> (considered as UTC time).</p>
<p>A geometry field definition is a list with named elements:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">$</span>type       <span class="sc">:</span> geom <span class="fu">type</span> (<span class="st">"Point"</span>, <span class="st">"Polygon"</span>, etc.)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="sc">$</span>srs        <span class="sc">:</span> optional spatial reference as WKT string</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="sc">$</span>is_nullable<span class="sc">:</span> optional NOT <span class="cn">NULL</span> <span class="fu">constraint</span> (logical scalar)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="sc">$</span>is_geom    <span class="sc">:</span> <span class="cn">TRUE</span> (required) <span class="cf">for</span> geometry fields</span></code></pre><p></p></div>
<p>Typically, there is one geometry field on a layer, but some formats support
more than one geometry column per table (e.g., PostGIS).</p>
<p>Geometry types are specified as a character string containing OGC WKT.
Common types include: <code>Point</code>, <code>LineString</code>, <code>Polygon</code>, <code>MultiPoint</code>,
<code>MultiLineString</code>, <code>MultiPolygon</code>. See the GDAL documentation for a list
of all supported geometry types:<br><a href="https://gdal.org/api/vector_c_api.html#_CPPv418OGRwkbGeometryType" class="external-link">https://gdal.org/api/vector_c_api.html#_CPPv418OGRwkbGeometryType</a></p>
<p>Format drivers may or may not support not-null constraints on attribute and
geometry fields. If they support creating fields with not-null constraints,
this is generally before creating any features to the layer. In some cases,
a not-null constraint may be available as a layer creation option. For
example, GeoPackage format has a layer creation option
<code>GEOMETRY_NULLABLE=[YES/NO]</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The feature id (FID) is a special property of a feature and not treated as
an attribute of the feature. Additional information is given in the GDAL
documentation for the
<a href="https://gdal.org/user/ogr_sql_dialect.html#feature-id-fid" class="external-link">OGR SQL</a> and
<a href="https://gdal.org/user/sql_sqlite_dialect.html#feature-id-fid" class="external-link">SQLite</a>
SQL dialects. Implications for SQL statements and result sets may depend
on the dialect used.</p>
<p>Some vector formats do not support schema definition prior to creating
features. For example, with GeoJSON only the <em>Feature</em> object has a member
with name <em>properties</em>. The specification does not require all <em>Feature</em>
objects in a collection to have the same schema of properties, nor does
it require all <em>Feature</em> objects in a collection to have geometry of the
same type (<a href="https://geojson.org/" class="external-link">https://geojson.org/</a>).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="ogr_manage.html">ogr_ds_create()</a></code>, <code><a href="ogr_manage.html">ogr_layer_create()</a></code>, <code><a href="ogr_manage.html">ogr_field_create()</a></code>, <code><a href="ogrinfo.html">ogrinfo()</a></code></p>
<p>WKT representation of geometry:<br><a href="https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry" class="external-link">https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">dsn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"test.sqlite"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">opt</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="has_spatialite.html">has_spatialite</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">opt</span> <span class="op">&lt;-</span> <span class="st">"SPATIALITE=YES"</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ogr_manage.html">ogr_ds_create</a></span><span class="op">(</span><span class="st">"SQLite"</span>, <span class="va">dsn</span>, dsco <span class="op">=</span> <span class="va">opt</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># define a layer</span></span></span>
<span class="r-in"><span><span class="va">defn</span> <span class="op">&lt;-</span> <span class="fu">ogr_def_layer</span><span class="op">(</span><span class="st">"Point"</span>, srs <span class="op">=</span> <span class="fu"><a href="epsg_to_wkt.html">epsg_to_wkt</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">fld1_int64</span> <span class="op">&lt;-</span> <span class="fu">ogr_def_field</span><span class="op">(</span><span class="st">"OFTInteger64"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">fld2_string</span> <span class="op">&lt;-</span> <span class="fu">ogr_def_field</span><span class="op">(</span><span class="st">"OFTString"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="ogr_manage.html">ogr_ds_test_cap</a></span><span class="op">(</span><span class="va">dsn</span><span class="op">)</span><span class="op">$</span><span class="va">CreateLayer</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="ogr_manage.html">ogr_layer_create</a></span><span class="op">(</span><span class="va">dsn</span>, <span class="st">"layer1"</span>, layer_defn <span class="op">=</span> <span class="va">defn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="ogr_manage.html">ogr_ds_layer_names</a></span><span class="op">(</span><span class="va">dsn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "layer1"</span>
<span class="r-in"><span><span class="fu"><a href="ogr_manage.html">ogr_layer_field_names</a></span><span class="op">(</span><span class="va">dsn</span>, <span class="st">"layer1"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "fld1_int64"  "fld2_string" "GEOMETRY"   </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="deleteDataset.html">deleteDataset</a></span><span class="op">(</span><span class="va">dsn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/ctoney" class="external-link">Chris Toney</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

