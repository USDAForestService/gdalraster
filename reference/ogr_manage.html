<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Utility functions for managing vector data sources — ogr_manage • gdalraster</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Utility functions for managing vector data sources — ogr_manage"><meta name="description" content="This set of functions can be used to create new vector datasets,
test existence of dataset/layer/field, test dataset and layer capabilities,
create new layers in an existing dataset, get the names of field domains
stored in a dataset, write field domains in a dataset, delete layers, create
new attribute and geometry fields on an existing layer, rename and delete
fields, and edit data with SQL statements."><meta property="og:description" content="This set of functions can be used to create new vector datasets,
test existence of dataset/layer/field, test dataset and layer capabilities,
create new layers in an existing dataset, get the names of field domains
stored in a dataset, write field domains in a dataset, delete layers, create
new attribute and geometry fields on an existing layer, rename and delete
fields, and edit data with SQL statements."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gdalraster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2.1.9036</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/raster-api-tutorial.html">Raster API Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/raster-display.html">Raster Display</a></li>
    <li><a class="dropdown-item" href="../articles/raster-attribute-tables.html">Raster Attribute Tables</a></li>
    <li><a class="dropdown-item" href="../articles/gdal-block-cache.html">GDAL Block Cache</a></li>
    <li><a class="dropdown-item" href="../articles/vector-api-overview.html">Vector API Overview</a></li>
    <li><a class="dropdown-item" href="../articles/vector-read-benchmarks.html">Vector Read Benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/gdal-config-quick-ref.html">GDAL Config Quick Reference</a></li>
    <li><a class="dropdown-item" href="../articles/use-gdal-cli-from-r.html">Using 'gdal' CLI algorithms from R</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Archived articles</h6></li>
    <li><a class="dropdown-item" href="../articles/gdalvector-draft.html">Draft Bindings to the GDAL/OGR Vector API</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USDAForestService/gdalraster/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Utility functions for managing vector data sources</h1>
      <small class="dont-index">Source: <a href="https://github.com/USDAForestService/gdalraster/blob/main/R/ogr_manage.R" class="external-link"><code>R/ogr_manage.R</code></a></small>
      <div class="d-none name"><code>ogr_manage.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This set of functions can be used to create new vector datasets,
test existence of dataset/layer/field, test dataset and layer capabilities,
create new layers in an existing dataset, get the names of field domains
stored in a dataset, write field domains in a dataset, delete layers, create
new attribute and geometry fields on an existing layer, rename and delete
fields, and edit data with SQL statements.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ogr_ds_exists</span><span class="op">(</span><span class="va">dsn</span>, with_update <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_ds_format</span><span class="op">(</span><span class="va">dsn</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_ds_test_cap</span><span class="op">(</span><span class="va">dsn</span>, with_update <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_ds_create</span><span class="op">(</span></span>
<span>  <span class="va">format</span>,</span>
<span>  <span class="va">dsn</span>,</span>
<span>  layer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  layer_defn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geom_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  srs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fld_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fld_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dsco <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lco <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  return_obj <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_ds_layer_count</span><span class="op">(</span><span class="va">dsn</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_ds_layer_names</span><span class="op">(</span><span class="va">dsn</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_ds_field_domain_names</span><span class="op">(</span><span class="va">dsn</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_ds_add_field_domain</span><span class="op">(</span><span class="va">dsn</span>, <span class="va">fld_dom_defn</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_ds_delete_field_domain</span><span class="op">(</span><span class="va">dsn</span>, <span class="va">domain_name</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_layer_exists</span><span class="op">(</span><span class="va">dsn</span>, <span class="va">layer</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_layer_test_cap</span><span class="op">(</span><span class="va">dsn</span>, layer <span class="op">=</span> <span class="cn">NULL</span>, with_update <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_layer_create</span><span class="op">(</span></span>
<span>  <span class="va">dsn</span>,</span>
<span>  <span class="va">layer</span>,</span>
<span>  layer_defn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geom_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  srs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lco <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  return_obj <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_layer_field_names</span><span class="op">(</span><span class="va">dsn</span>, layer <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_layer_rename</span><span class="op">(</span><span class="va">dsn</span>, <span class="va">layer</span>, <span class="va">new_name</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_layer_delete</span><span class="op">(</span><span class="va">dsn</span>, <span class="va">layer</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_field_index</span><span class="op">(</span><span class="va">dsn</span>, <span class="va">layer</span>, <span class="va">fld_name</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_field_create</span><span class="op">(</span></span>
<span>  <span class="va">dsn</span>,</span>
<span>  <span class="va">layer</span>,</span>
<span>  <span class="va">fld_name</span>,</span>
<span>  fld_defn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fld_type <span class="op">=</span> <span class="st">"OFTInteger"</span>,</span>
<span>  fld_subtype <span class="op">=</span> <span class="st">"OFSTNone"</span>,</span>
<span>  fld_width <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  fld_precision <span class="op">=</span> <span class="fl">0L</span>,</span>
<span>  is_nullable <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  is_unique <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  default_value <span class="op">=</span> <span class="st">""</span>,</span>
<span>  domain_name <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_geom_field_create</span><span class="op">(</span></span>
<span>  <span class="va">dsn</span>,</span>
<span>  <span class="va">layer</span>,</span>
<span>  <span class="va">fld_name</span>,</span>
<span>  geom_fld_defn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geom_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  srs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  is_nullable <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_field_rename</span><span class="op">(</span><span class="va">dsn</span>, <span class="va">layer</span>, <span class="va">fld_name</span>, <span class="va">new_name</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_field_set_domain_name</span><span class="op">(</span><span class="va">dsn</span>, <span class="va">layer</span>, <span class="va">fld_name</span>, <span class="va">domain_name</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_field_delete</span><span class="op">(</span><span class="va">dsn</span>, <span class="va">layer</span>, <span class="va">fld_name</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ogr_execute_sql</span><span class="op">(</span><span class="va">dsn</span>, <span class="va">sql</span>, spatial_filter <span class="op">=</span> <span class="cn">NULL</span>, dialect <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dsn">dsn<a class="anchor" aria-label="anchor" href="#arg-dsn"></a></dt>
<dd><p>Character string. The vector data source name, e.g., a filename
or database connection string.</p></dd>


<dt id="arg-with-update">with_update<a class="anchor" aria-label="anchor" href="#arg-with-update"></a></dt>
<dd><p>Logical value. <code>TRUE</code> to request update access when
opening the dataset, or <code>FALSE</code> to open read-only.</p></dd>


<dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>GDAL short name of the vector format as character string.
Examples of some common output formats include: <code>"GPKG"</code>, <code>"FlatGeobuf"</code>,
<code>"ESRI Shapefile"</code>, <code>"SQLite"</code>.</p></dd>


<dt id="arg-layer">layer<a class="anchor" aria-label="anchor" href="#arg-layer"></a></dt>
<dd><p>Character string for a layer name in a vector dataset.
The <code>layer</code> argument may be given as empty string (<code>""</code>) in which case the
first layer by index will be opened (except with <code>ogr_layer_delete()</code> and
<code>ogr_layer_rename()</code> for which a layer name must be specified).</p></dd>


<dt id="arg-layer-defn">layer_defn<a class="anchor" aria-label="anchor" href="#arg-layer-defn"></a></dt>
<dd><p>A feature class definition for <code>layer</code> as a list of
zero or more attribute field definitions, and at least one geometry field
definition (see <a href="ogr_define.html">ogr_define</a>).
Each field definition is a list with named elements containing values for
the field <code>type</code> element and other properties.
If <code>layer_defn</code> is given, it will be used and any additional parameters
passed that relate to the feature class definition will be ignored (i.e.,
<code>geom_type</code> and <code>srs</code>, as well as <code>fld_name</code> and <code>fld_type</code> in
<code>ogr_ds_create()</code>).
The first geometry field definition in <code>layer_defn</code> defines the
geometry type and spatial reference system for the layer (the geom field
definition must contain <code>type</code>, and should also contain <code>srs</code> when
creating a layer from a feature class definition).</p></dd>


<dt id="arg-geom-type">geom_type<a class="anchor" aria-label="anchor" href="#arg-geom-type"></a></dt>
<dd><p>Character string specifying a geometry type (see Details).</p></dd>


<dt id="arg-srs">srs<a class="anchor" aria-label="anchor" href="#arg-srs"></a></dt>
<dd><p>Character string containing a spatial reference system definition
as OGC WKT or other well-known format (e.g., the input formats usable with
<code><a href="srs_convert.html">srs_to_wkt()</a></code>).</p></dd>


<dt id="arg-fld-name">fld_name<a class="anchor" aria-label="anchor" href="#arg-fld-name"></a></dt>
<dd><p>Character string containing the name of an attribute field
in <code>layer</code>.</p></dd>


<dt id="arg-fld-type">fld_type<a class="anchor" aria-label="anchor" href="#arg-fld-type"></a></dt>
<dd><p>Character string containing the name of a field data type
(e.g., <code>"OFTInteger"</code>, <code>"OFTInteger64"</code>, <code>"OFTReal"</code>, <code>"OFTString"</code>, ...).</p></dd>


<dt id="arg-dsco">dsco<a class="anchor" aria-label="anchor" href="#arg-dsco"></a></dt>
<dd><p>Optional character vector of format-specific creation options
for <code>dsn</code> (<code>"NAME=VALUE"</code> pairs).</p></dd>


<dt id="arg-lco">lco<a class="anchor" aria-label="anchor" href="#arg-lco"></a></dt>
<dd><p>Optional character vector of format-specific creation options
for <code>layer</code> (<code>"NAME=VALUE"</code> pairs).</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>Logical value. <code>TRUE</code> to overwrite <code>dsn</code> if it already
exists when calling <code>ogr_ds_create()</code>. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-return-obj">return_obj<a class="anchor" aria-label="anchor" href="#arg-return-obj"></a></dt>
<dd><p>Logical value. If <code>TRUE</code>, an object of class
<code><a href="GDALVector-class.html">GDALVector</a></code> open on the newly created layer will be
returned. Defaults to <code>FALSE</code>. Must be used with either the <code>layer</code> or
<code>layer_defn</code> arguments.</p></dd>


<dt id="arg-fld-dom-defn">fld_dom_defn<a class="anchor" aria-label="anchor" href="#arg-fld-dom-defn"></a></dt>
<dd><p>A field domain definition, i.e., a list generated with
<code><a href="ogr_define.html">ogr_def_field_domain()</a></code>.</p></dd>


<dt id="arg-domain-name">domain_name<a class="anchor" aria-label="anchor" href="#arg-domain-name"></a></dt>
<dd><p>Character string specifying the name of the field domain.</p></dd>


<dt id="arg-new-name">new_name<a class="anchor" aria-label="anchor" href="#arg-new-name"></a></dt>
<dd><p>Character string containing a new name to assign.</p></dd>


<dt id="arg-fld-defn">fld_defn<a class="anchor" aria-label="anchor" href="#arg-fld-defn"></a></dt>
<dd><p>A field definition as list (see <code><a href="ogr_define.html">ogr_def_field()</a></code>).
Additional arguments in <code>ogr_field_create()</code> will be ignored if a <code>fld_defn</code>
is given.</p></dd>


<dt id="arg-fld-subtype">fld_subtype<a class="anchor" aria-label="anchor" href="#arg-fld-subtype"></a></dt>
<dd><p>Character string containing the name of a field subtype.
One of <code>"OFSTNone"</code> (the default), <code>"OFSTBoolean"</code>, <code>"OFSTInt16"</code>,
<code>"OFSTFloat32"</code>, <code>"OFSTJSON"</code>, <code>"OFSTUUID"</code>.</p></dd>


<dt id="arg-fld-width">fld_width<a class="anchor" aria-label="anchor" href="#arg-fld-width"></a></dt>
<dd><p>Optional integer value specifying max number of characters.</p></dd>


<dt id="arg-fld-precision">fld_precision<a class="anchor" aria-label="anchor" href="#arg-fld-precision"></a></dt>
<dd><p>Optional integer value specifying number of digits
after the decimal point.</p></dd>


<dt id="arg-is-nullable">is_nullable<a class="anchor" aria-label="anchor" href="#arg-is-nullable"></a></dt>
<dd><p>Optional NOT NULL field constraint (logical value).
Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-is-unique">is_unique<a class="anchor" aria-label="anchor" href="#arg-is-unique"></a></dt>
<dd><p>Optional UNIQUE constraint on the field (logical value).
Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-default-value">default_value<a class="anchor" aria-label="anchor" href="#arg-default-value"></a></dt>
<dd><p>Optional default value for the field as a character
string.</p></dd>


<dt id="arg-geom-fld-defn">geom_fld_defn<a class="anchor" aria-label="anchor" href="#arg-geom-fld-defn"></a></dt>
<dd><p>A geometry field definition as list (see
<code><a href="ogr_define.html">ogr_def_geom_field()</a></code>). Additional arguments in <code>ogr_geom_field_create()</code>
will be ignored if a <code>geom_fld_defn</code> is given.</p></dd>


<dt id="arg-sql">sql<a class="anchor" aria-label="anchor" href="#arg-sql"></a></dt>
<dd><p>Character string containing an SQL statement (see Note).</p></dd>


<dt id="arg-spatial-filter">spatial_filter<a class="anchor" aria-label="anchor" href="#arg-spatial-filter"></a></dt>
<dd><p>Either a numeric vector of length four containing a
bounding box (xmin, ymin, xmax, ymax), or a character string containing a
geometry as OGC WKT, representing a spatial filter.</p></dd>


<dt id="arg-dialect">dialect<a class="anchor" aria-label="anchor" href="#arg-dialect"></a></dt>
<dd><p>Character string specifying the SQL dialect to use.
The OGR SQL engine (<code>"OGRSQL"</code>) will be used by default if a value is not
given. The <code>"SQLite"</code> dialect can also be used (see Note).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>These functions are complementary to <code><a href="ogrinfo.html">ogrinfo()</a></code> and <code><a href="ogr2ogr.html">ogr2ogr()</a></code> for
vector data management. Bindings to OGR wrap portions of the GDAL
Vector API (ogr_core.h and ogr_api.h,
<a href="https://gdal.org/en/stable/api/vector_c_api.html" class="external-link">https://gdal.org/en/stable/api/vector_c_api.html</a>).</p>
<p><code>ogr_ds_exists()</code> tests whether a vector dataset can be opened from the
given data source name (DSN), potentially testing for update access.
Returns a logical value.</p>
<p><code>ogr_ds_format()</code> returns a character string containing the short name of
the format driver for a given DSN, or <code>NULL</code> if the dataset cannot be
opened as a vector source.</p>
<p><code>ogr_ds_test_cap()</code> tests the capabilities of a vector data source,
attempting to open it with update access by default.
Returns a list of capabilities with values <code>TRUE</code> or <code>FALSE</code>, or <code>NULL</code> is
returned if <code>dsn</code> cannot be opened with the requested access.
Wrapper of <code>GDALDatasetTestCapability()</code> in the GDAL API.
The returned list contains the following named elements:</p><ul><li><p><code>CreateLayer</code>: <code>TRUE</code> if this dataset can create new layers</p></li>
<li><p><code>DeleteLayer</code>: <code>TRUE</code> if this dataset can delete existing layers</p></li>
<li><p><code>CreateGeomFieldAfterCreateLayer</code>: <code>TRUE</code> if the layers of this
dataset supports geometry field creation just after layer creation</p></li>
<li><p><code>CurveGeometries</code>: <code>TRUE</code> if this dataset supports curve geometries</p></li>
<li><p><code>Transactions</code>: <code>TRUE</code> if this dataset supports (efficient)
transactions</p></li>
<li><p><code>EmulatedTransactions</code>: <code>TRUE</code> if this dataset supports transactions
through emulation</p></li>
<li><p><code>RandomLayerRead</code>: <code>TRUE</code> if this dataset has a dedicated
<code>GetNextFeature()</code> implementation, potentially returning features from
layers in a non-sequential way</p></li>
<li><p><code>RandomLayerWrite</code>: <code>TRUE</code> if this dataset supports calling
<code>CreateFeature()</code> on layers in a non-sequential way</p></li>
<li><p><code>AddFieldDomain</code>: <code>TRUE</code> if this dataset supports adding field domains
(GDAL &gt;= 3.3)</p></li>
<li><p><code>DeleteFieldDomain</code>: <code>TRUE</code> if this dataset supports deleting field
domains (GDAL &gt;= 3.5)
<code>UpdateFieldDomain</code>: <code>TRUE</code> if this dataset supports updating a an existing
field domain by replacing its definition (GDAL &gt;= 3.5)</p></li>
</ul><p><code>ogr_ds_create()</code> creates a new vector dataset, optionally also creating
a layer, and optionally creating one or more fields on the layer.
The attribute fields and geometry field(s) to create can be specified as a
feature class definition (<code>layer_defn</code> as list, see <a href="ogr_define.html">ogr_define</a>), or
alternatively, by giving the <code>geom_type</code> and <code>srs</code>, optionally along with
one <code>fld_name</code> and <code>fld_type</code> to be created in the layer.
By default, returns logical <code>TRUE</code> indicating success (output written to
<code>dst_filename</code>), or an object of class <code><a href="GDALVector-class.html">GDALVector</a></code> for the
output layer will be returned if <code>return_obj = TRUE</code>. An error is raised if
the operation fails.</p>
<p><code>ogr_ds_layer_count()</code> returns the number of layers in a vector dataset.</p>
<p><code>ogr_ds_layer_names()</code> returns a character vector of layer names in a
vector dataset, or <code>NULL</code> if no layers are found.</p>
<p><code>ogr_ds_field_domain_names()</code> returns a character vector with the names of
all field domains stored in the dataset. Returns <code>NULL</code> and emits a warning
if an error occurs or if the format does not support reading field domains.
Returns a character vector of length 0 (<code>character(0)</code>) if the format
supports field domains but none are present in the dataset.
Requires GDAL &gt;= 3.5. See <a href="ogr_define.html">ogr_define</a> for information on field domains.</p>
<p><code>ogr_ds_add_field_domain()</code> adds a field domain to a vector dataset. Only a
few drivers will support this operation, and some of them might only support
it only for some types of field domains. GeoPackage and OpenFileGDB drivers
support this operation. A dataset having at least some support should report
the <code>AddFieldDomain</code> dataset capability (see <code>ogr_ds_test_cap()</code>above).
Returns a logical value, <code>TRUE</code> indicating success. Requires GDAL &gt;= 3.3.</p>
<p><code>ogr_ds_delete_field_domain()</code> deletes a field domain from a vector dataset
if supported (see <code>ogr_ds_test_cap()</code>above for the <code>DeleteFieldDomain</code>
dataset capability). Returns a logical value, <code>TRUE</code> indicating success.
Requires GDAL &gt;= 3.5.</p>
<p><code>ogr_layer_exists()</code> tests whether a layer can be accessed by name in a
given vector dataset. Returns a logical value</p>
<p><code>ogr_layer_test_cap()</code> tests whether a layer supports named capabilities,
attempting to open the dataset with update access by default.
Returns a list of capabilities with values <code>TRUE</code> or <code>FALSE</code>. <code>NULL</code> is
returned if <code>dsn</code> cannot be opened with the requested access, or <code>layer</code>
cannot be found. The returned list contains the following named elements:
<code>RandomRead</code>, <code>SequentialWrite</code>, <code>RandomWrite</code>, <code>UpsertFeature</code>,
<code>FastSpatialFilter</code>, <code>FastFeatureCount</code>, <code>FastGetExtent</code>,
<code>FastSetNextByIndex</code>, <code>CreateField</code>, <code>CreateGeomField</code>, <code>DeleteField</code>,
<code>ReorderFields</code>, <code>AlterFieldDefn</code>, <code>AlterGeomFieldDefn</code>, <code>IgnoreFields</code>,
<code>DeleteFeature</code>, <code>Rename</code>, <code>StringsAsUTF8</code>, <code>CurveGeometries</code>.
See the GDAL documentation for
<a href="https://gdal.org/en/stable/api/vector_c_api.html#_CPPv420OGR_L_TestCapability9OGRLayerHPKc" class="external-link"><code>OGR_L_TestCapability()</code></a>.</p>
<p><code>ogr_layer_create()</code> creates a new layer in an existing vector data source,
with a specified geometry type and spatial reference definition.
This function also accepts a feature class definition given as a list of
field names and their definitions (see <a href="ogr_define.html">ogr_define</a>).
(Note: use <code>ogr_ds_create()</code> to create single-layer formats such as "ESRI
Shapefile", "FlatGeobuf", "GeoJSON", etc.)
By default, returns logical <code>TRUE</code> indicating success, or an object of class
<code><a href="GDALVector-class.html">GDALVector</a></code> will be returned if <code>return_obj = TRUE</code>.
An error is raised if the operation fails.</p>
<p><code>ogr_layer_field_names()</code> returns a character vector of field names on a
layer, or <code>NULL</code> if no fields are found. The first layer by index is opened
if <code>NULL</code> is given for the <code>layer</code> argument.</p>
<p><code>ogr_layer_rename()</code> renames a layer in a vector dataset. This operation is
implemented only by layers that expose the <code>Rename</code> capability (see
<code>ogr_layer_test_cap()</code> above). This operation will fail if a layer with the
new name already exists. Returns a logical value, <code>TRUE</code> indicating success.
Requires GDAL &gt;= 3.5.</p>
<p><code>ogr_layer_delete()</code> deletes an existing layer in a vector dataset.
Returns a logical value, <code>TRUE</code> indicating success.</p>
<p><code>ogr_field_index()</code> tests for existence of an attribute field by name.
Returns the field index on the layer (0-based), or <code>-1</code> if the field does
not exist.</p>
<p><code>ogr_field_create()</code> creates a new attribute field of specified data type in
a given DSN/layer. Several optional field properties can be specified in
addition to the type. Returns a logical value, <code>TRUE</code> indicating success.</p>
<p><code>ogr_geom_field_create()</code> creates a new geometry field of specified type in
a given DSN/layer. Returns a logical value, <code>TRUE</code> indicating success.</p>
<p><code>ogr_field_rename()</code> renames an existing field on a vector layer.
Not all format drivers support this function. Some drivers may only support
renaming a field while there are still no features in the layer.
<code>AlterFieldDefn</code> is the relevant layer capability to check.
Returns a logical value, <code>TRUE</code> indicating success.</p>
<p><code>ogr_field_set_domain_name()</code> sets the field domain name for an existing
attribute field on a vector layer. <code>AlterFieldDefn</code> layer capability is
required. Returns a logical value, <code>TRUE</code> indicating success.
Requires GDAL &gt;= 3.3.</p>
<p><code>ogr_field_delete()</code> deletes an existing field on a vector layer.
Not all format drivers support this function. Some drivers may only support
deleting a field while there are still no features in the layer.
Returns a logical value, <code>TRUE</code> indicating success.</p>
<p><code>ogr_execute_sql()</code> executes an SQL statement against the data store.
This function can be used to modify the schema or edit data using SQL
(e.g., <code>ALTER TABLE</code>, <code>DROP TABLE</code>, <code>CREATE INDEX</code>, <code>DROP INDEX</code>, <code>INSERT</code>,
<code>UPDATE</code>, <code>DELETE</code>), or to execute a query (i.e., <code>SELECT</code>).
Returns <code>NULL</code> (invisibly) for statements that are in error, or that have no
results set, or an object of class <code>GDALVector</code> representing a results set
from the query. Wrapper of <code>GDALDatasetExecuteSQL()</code> in the GDAL API.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>The OGR SQL document linked under <strong>See Also</strong> contains information on the
SQL dialect supported internally by GDAL/OGR. Some format drivers (e.g.,
PostGIS) pass the SQL directly through to the underlying RDBMS (unless
<code>OGRSQL</code> is explicitly passed as the dialect). The SQLite dialect can also
be requested with the <code>SQLite</code> string passed as the <code>dialect</code> argument of
<code>ogr_execute_sql()</code>. This assumes that GDAL/OGR is built with support for
SQLite, and preferably also with Spatialite support to benefit from spatial
functions. The GDAL document for SQLite dialect has detailed information.</p>
<p>Other SQL dialects may also be present for some vector formats.
For example, the <code>"INDIRECT_SQLITE"</code> dialect might potentially be used with
GeoPackage format (<a href="https://gdal.org/en/stable/drivers/vector/gpkg.html#sql" class="external-link">https://gdal.org/en/stable/drivers/vector/gpkg.html#sql</a>).</p>
<p>The function <code><a href="ogrinfo.html">ogrinfo()</a></code> can also be used to edit data with SQL statements
(GDAL &gt;= 3.7).</p>
<p>The name of the geometry column of a layer is empty (<code>""</code>) with some formats
such as ESRI Shapefile and FlatGeobuf. Implications for SQL may depend on the
dialect used. See the GDAL documentation for the "OGR SQL" and "SQLite"
dialects for details.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>OGR SQL dialect and SQLite SQL dialect:<br><a href="https://gdal.org/en/stable/user/ogr_sql_sqlite_dialect.html" class="external-link">https://gdal.org/en/stable/user/ogr_sql_sqlite_dialect.html</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Create GeoPackage and manage schema</span></span></span>
<span class="r-in"><span><span class="va">dsn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"test1.gpkg"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ogr_ds_create</span><span class="op">(</span><span class="st">"GPKG"</span>, <span class="va">dsn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">ogr_ds_exists</span><span class="op">(</span><span class="va">dsn</span>, with_update <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="co"># dataset capabilities</span></span></span>
<span class="r-in"><span><span class="fu">ogr_ds_test_cap</span><span class="op">(</span><span class="va">dsn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $CreateLayer</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $DeleteLayer</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $CreateGeomFieldAfterCreateLayer</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $CurveGeometries</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Transactions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $EmulatedTransactions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $RandomLayerRead</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $RandomLayerWrite</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $AddFieldDomain</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $DeleteFieldDomain</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $UpdateFieldDomain</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ogr_layer_create</span><span class="op">(</span><span class="va">dsn</span>, layer <span class="op">=</span> <span class="st">"layer1"</span>, geom_type <span class="op">=</span> <span class="st">"Polygon"</span>,</span></span>
<span class="r-in"><span>                 srs <span class="op">=</span> <span class="st">"EPSG:5070"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ogr_field_create</span><span class="op">(</span><span class="va">dsn</span>, layer <span class="op">=</span> <span class="st">"layer1"</span>,</span></span>
<span class="r-in"><span>                 fld_name <span class="op">=</span> <span class="st">"field1"</span>,</span></span>
<span class="r-in"><span>                 fld_type <span class="op">=</span> <span class="st">"OFTInteger64"</span>,</span></span>
<span class="r-in"><span>                 is_nullable <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">ogr_field_create</span><span class="op">(</span><span class="va">dsn</span>, layer <span class="op">=</span> <span class="st">"layer1"</span>,</span></span>
<span class="r-in"><span>                 fld_name <span class="op">=</span> <span class="st">"field2"</span>,</span></span>
<span class="r-in"><span>                 fld_type <span class="op">=</span> <span class="st">"OFTString"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ogr_ds_layer_count</span><span class="op">(</span><span class="va">dsn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="fu">ogr_ds_layer_names</span><span class="op">(</span><span class="va">dsn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "layer1"</span>
<span class="r-in"><span><span class="fu">ogr_layer_field_names</span><span class="op">(</span><span class="va">dsn</span>, layer <span class="op">=</span> <span class="st">"layer1"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "field1" "field2" "geom"  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># delete a field</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">ogr_layer_test_cap</span><span class="op">(</span><span class="va">dsn</span>, <span class="st">"layer1"</span><span class="op">)</span><span class="op">$</span><span class="va">DeleteField</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">ogr_field_delete</span><span class="op">(</span><span class="va">dsn</span>, layer <span class="op">=</span> <span class="st">"layer1"</span>, fld_name <span class="op">=</span> <span class="st">"field2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ogr_layer_field_names</span><span class="op">(</span><span class="va">dsn</span>, <span class="st">"layer1"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "field1" "geom"  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># define a feature class and create layer</span></span></span>
<span class="r-in"><span><span class="va">defn</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_layer</a></span><span class="op">(</span><span class="st">"Point"</span>, srs <span class="op">=</span> <span class="fu"><a href="srs_convert.html">epsg_to_wkt</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># add the attribute fields</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">id_field</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_field</a></span><span class="op">(</span>fld_type <span class="op">=</span> <span class="st">"OFTInteger64"</span>,</span></span>
<span class="r-in"><span>                               is_nullable <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                               is_unique <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">str_field</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_field</a></span><span class="op">(</span>fld_type <span class="op">=</span> <span class="st">"OFTString"</span>,</span></span>
<span class="r-in"><span>                                fld_width <span class="op">=</span> <span class="fl">25</span>,</span></span>
<span class="r-in"><span>                                is_nullable <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                                default_value <span class="op">=</span> <span class="st">"'a default string'"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">defn</span><span class="op">$</span><span class="va">numeric_field</span> <span class="op">&lt;-</span> <span class="fu"><a href="ogr_define.html">ogr_def_field</a></span><span class="op">(</span>fld_type <span class="op">=</span> <span class="st">"OFTReal"</span>,</span></span>
<span class="r-in"><span>                                    default_value <span class="op">=</span> <span class="st">"0.0"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ogr_layer_create</span><span class="op">(</span><span class="va">dsn</span>, layer <span class="op">=</span> <span class="st">"layer2"</span>, layer_defn <span class="op">=</span> <span class="va">defn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">ogr_ds_layer_names</span><span class="op">(</span><span class="va">dsn</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "layer1" "layer2"</span>
<span class="r-in"><span><span class="fu">ogr_layer_field_names</span><span class="op">(</span><span class="va">dsn</span>, layer <span class="op">=</span> <span class="st">"layer2"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "id_field"      "str_field"     "numeric_field" "geom"         </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add a field using SQL instead</span></span></span>
<span class="r-in"><span><span class="fu">ogr_execute_sql</span><span class="op">(</span><span class="va">dsn</span>, sql <span class="op">=</span> <span class="st">"ALTER TABLE layer2 ADD field4 float"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> info: open dataset successful on DSN:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   '/tmp/RtmpqAGoPg/test1.gpkg'</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># rename a field</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu">ogr_layer_test_cap</span><span class="op">(</span><span class="va">dsn</span>, <span class="st">"layer1"</span><span class="op">)</span><span class="op">$</span><span class="va">AlterFieldDefn</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">ogr_field_rename</span><span class="op">(</span><span class="va">dsn</span>, layer <span class="op">=</span> <span class="st">"layer2"</span>,</span></span>
<span class="r-in"><span>                   fld_name <span class="op">=</span> <span class="st">"field4"</span>,</span></span>
<span class="r-in"><span>                   new_name <span class="op">=</span> <span class="st">"renamed_field"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu">ogr_layer_field_names</span><span class="op">(</span><span class="va">dsn</span>, layer <span class="op">=</span> <span class="st">"layer2"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "id_field"      "str_field"     "numeric_field" "renamed_field"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "geom"         </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># GDAL &gt;= 3.7</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="gdal_version.html">gdal_version_num</a></span><span class="op">(</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fu"><a href="gdal_compute_version.html">gdal_compute_version</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="ogrinfo.html">ogrinfo</a></span><span class="op">(</span><span class="va">dsn</span>, <span class="st">"layer2"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO: Open of `/tmp/RtmpqAGoPg/test1.gpkg'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       using driver `GPKG' successful.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Layer name: layer2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry: Point</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Feature Count: 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Layer SRS WKT:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GEOGCRS["WGS 84",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     DATUM["World Geodetic System 1984",</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ELLIPSOID["WGS 84",6378137,298.257223563,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             LENGTHUNIT["metre",1]]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     PRIMEM["Greenwich",0,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     CS[ellipsoidal,2],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         AXIS["geodetic latitude (Lat)",north,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ORDER[1],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         AXIS["geodetic longitude (Lon)",east,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ORDER[2],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     USAGE[</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         SCOPE["Horizontal component of 3D system."],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         AREA["World."],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         BBOX[-90,-180,90,180]],</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ID["EPSG",4326]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Data axis to CRS axis mapping: 2,1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FID Column = fid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Geometry Column = geom</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> id_field: Integer64 (0.0) UNIQUE NOT NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> str_field: String (25.0) NOT NULL DEFAULT 'a default string'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> numeric_field: Real (0.0) DEFAULT 0.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> renamed_field: Real(Float32) (0.0)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Edit data using SQL</span></span></span>
<span class="r-in"><span><span class="va">src</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ynp_fires_1984_2022.gpkg"</span>, package<span class="op">=</span><span class="st">"gdalraster"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">perims_shp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"mtbs_perims.shp"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ogr2ogr.html">ogr2ogr</a></span><span class="op">(</span>src_dsn <span class="op">=</span> <span class="va">src</span>, dst_dsn <span class="op">=</span> <span class="va">perims_shp</span>, src_layers <span class="op">=</span> <span class="st">"mtbs_perims"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GDAL WARNING 6: Normalized/laundered field name: 'burn_bnd_ac' to 'burn_bnd_a'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GDAL WARNING 6: Normalized/laundered field name: 'burn_bnd_lat' to 'burn_bnd_l'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GDAL WARNING 6: Normalized/laundered field name: 'burn_bnd_lon' to 'burn_bnd_1'</span>
<span class="r-in"><span><span class="fu">ogr_ds_format</span><span class="op">(</span>dsn <span class="op">=</span> <span class="va">perims_shp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ESRI Shapefile"</span>
<span class="r-in"><span><span class="fu">ogr_ds_layer_names</span><span class="op">(</span>dsn <span class="op">=</span> <span class="va">perims_shp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "mtbs_perims"</span>
<span class="r-in"><span><span class="fu">ogr_layer_field_names</span><span class="op">(</span>dsn <span class="op">=</span> <span class="va">perims_shp</span>, layer <span class="op">=</span> <span class="st">"mtbs_perims"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "event_id"   "incid_name" "incid_type" "map_id"     "burn_bnd_a"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "burn_bnd_l" "burn_bnd_1" "ig_date"    "ig_year"    ""          </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">alt_tbl</span> <span class="op">&lt;-</span> <span class="st">"ALTER TABLE mtbs_perims ADD burn_bnd_ha float"</span></span></span>
<span class="r-in"><span><span class="fu">ogr_execute_sql</span><span class="op">(</span>dsn <span class="op">=</span> <span class="va">perims_shp</span>, sql <span class="op">=</span> <span class="va">alt_tbl</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> info: open dataset successful on DSN:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   '/tmp/RtmpqAGoPg/mtbs_perims.shp'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GDAL WARNING 6: Normalized/laundered field name: 'burn_bnd_ha' to 'burn_bnd_h'</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">upd</span> <span class="op">&lt;-</span> <span class="st">"UPDATE mtbs_perims SET burn_bnd_ha = (burn_bnd_ac / 2.471)"</span></span></span>
<span class="r-in"><span><span class="fu">ogr_execute_sql</span><span class="op">(</span>dsn <span class="op">=</span> <span class="va">perims_shp</span>, sql <span class="op">=</span> <span class="va">upd</span>, dialect <span class="op">=</span> <span class="st">"SQLite"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> info: open dataset successful on DSN:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   '/tmp/RtmpqAGoPg/mtbs_perims.shp'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GDAL FAILURE 1: In ExecuteSQL(): sqlite3_prepare_v2(UPDATE mtbs_perims SET burn_bnd_ha = (burn_bnd_ac / 2.471)):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   no such column: burn_bnd_ac</span>
<span class="r-in"><span><span class="fu">ogr_layer_field_names</span><span class="op">(</span>dsn <span class="op">=</span> <span class="va">perims_shp</span>, layer <span class="op">=</span> <span class="st">"mtbs_perims"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "event_id"   "incid_name" "incid_type" "map_id"     "burn_bnd_a"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "burn_bnd_l" "burn_bnd_1" "ig_date"    "ig_year"    "burn_bnd_h"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] ""          </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if GDAL &gt;= 3.7:</span></span></span>
<span class="r-in"><span><span class="co">#   ogrinfo(dsn = perims_shp, layer = "mtbs_perims")</span></span></span>
<span class="r-in"><span><span class="co"># or, for output incl. the feature data (omit the default "-so" arg):</span></span></span>
<span class="r-in"><span><span class="co">#   ogrinfo(dsn = perims_shp, layer = "mtbs_perims", cl_arg = "-nomd")</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/ctoney" class="external-link">Chris Toney</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

